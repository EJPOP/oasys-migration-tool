SELECT TT.*,
    F_ORG_INFO(TT.INST_CD, '1') AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */,
    CASE WHEN TRIM(TT.SRECS_DCSN_SECD) IS NULL THEN '' ELSE F_CODE_NM ('1000046', TT.SRECS_DCSN_SECD) || '-' || TT.SRECS_DCSN_YR || '-' || TT.SRECS_DCSN_NO END AS TRIM /* 결정(사항)번호 */,
    (CASE WHEN TT.SRECS_MERG_DEPT_CD IS NULL THEN '' ELSE 'Y' END) AS SRECS_MERG_DEPT_CD /* 심사재심의병합부서코드 */,
    (SELECT AS DSPS_RQT_NM /* 처분요구명 */
FROM TB_BADEAR001M WHERE 1 = 1 AND CVLCPT_ADT_YR = TT.CVLCPT_ADT_YR AND ADT_NO = TT.ADT_NO AND DSPS_RQT_SQNO = TT.DSPS_RQT_SQNO AND ROWNUM = 1 ) AS DSPS_RQT_NM , CASE WHEN TRIM(TT.OTSD_EXPRT_ADDR) IS NULL OR TRIM(TT.OTSD_EXPRT_ADDR) = '' OR TRIM(TT.OTSD_EXPRT_ADDR) = ' ' THEN '(청구인 주소)' ELSE '('|| TRIM(TT.CRU_ZIP) ||') '|| TRIM(TT.OTSD_EXPRT_ADDR) ||' '|| NVL(TRIM(TT.CRU_CVLPR_DADDR), ' ') END AS HWP_AD /*한글문서 출력 주소*/ , TT.CVLCPT_RCPT_YR || '-' || DECODE(TT.SRECS_RCPT_SECD,'1','심사','2','재심의','3','재심판정') || '-' || TT.SRECS_RCPT_SQNO || ' ' || TT.RSCH_ASMT_TTL AS HWP_NO_TIT /* 한글문서 감사사무처리부번호, 제목 */ , CASE WHEN TT.SRECS_PRCS_PIC_TELNO_3 IS NULL OR TT.SRECS_PRCS_PIC_TELNO_3 = '' OR TT.SRECS_PRCS_PIC_TELNO_3 = ' ' THEN '(담당자 전화번호)' ELSE TT.SRECS_PRCS_PIC_TELNO_1 || '-' || TT.SRECS_PRCS_PIC_TELNO_2 || '-' || TT.SRECS_PRCS_PIC_TELNO_3 END AS HWP_TNB /* 한글문서 담당자 전화번호 */ , F_USR_INFO_BY_ID(TT.LAST_USER_ID, '2') AS FNL_USR_NM /*최종사용자명*/ FROM (SELECT T.*,
    ROW_NUMBER() OVER( ORDER BY CVLCPT_RCPT_YR DESC, SRECS_RCPT_SQNO DESC ) AS ROW_NUMBER
FROM (SELECT DT.*,
    COUNT(1) OVER() AS 1
FROM ( SELECT A.SRECS_RCPT_YR /* 심사재심의접수년도 */,
    A.SRECS_RCPT_SECD /* 심사재심의접수구분코드 */,
    A.SRECS_RCPT_SQNO /* 심사재심의접수순번 */,
    A.SRECS_DEPT_CD /* 심사재심의부서코드 */,
    A.SRECS_MERG_RCPT_YR /* 심사재심의병합접수년도 */,
    A.SRECS_MERG_RCPT_SECD /* 심사재심의병합접수구분코드 */,
    A.SRECS_MERG_RCPT_SQNO /* 심사재심의병합접수순번 */,
    A.SRECS_MERG_DEPT_CD /* 심사재심의병합부서코드 */,
    CASE WHEN A.SRECS_RCPT_YR >= '2016' THEN A.SRECS_RCPT_YR || '-' || DECODE(A.SRECS_RCPT_SECD,'1','심사','2','재심','3','재심판정') || '-' || A.SRECS_RCPT_SQNO ELSE A.SRECS_RCPT_YR || '-' || A.SRECS_RCPT_SECD || '-' || A.SRECS_RCPT_SQNO END AS NTFCTN_RCPT_SQNO /* 통보접수순번 */,
    A.SRECS_RCPT_YMD /* 심사재심의접수일자 */,
    A.SRECS_CLM_YMD /* 심사재심의청구일자 */,
    A.SRECS_NM /* 심사재심의명 */,
    A.SRECS_RPT_YMD /* 심사재심의보고일자 */,
    A.SRECS_PRCS_TERM_YMD /* 심사재심의처리기한일자 */,
    CASE WHEN (C.ENFC_YMD IS NULL AND B.SBCN_YMD IS NULL) THEN TO_DATE(SYSDATE) - TO_DATE(A.SRECS_RCPT_YMD) || '일' ELSE CASE WHEN TRIM(B.SBCN_YMD) IS NOT NULL THEN TO_DATE(B.SBCN_YMD) - TO_DATE(A.SRECS_RCPT_YMD) || '일' ELSE TO_DATE(C.ENFC_YMD) - TO_DATE(A.SRECS_RCPT_YMD) || '일' END END AS GPCD_PRCS_YMD /* 처리일자 */,
    A.SRECS_SRNG_CLM_SECD /* 심사재심의심사청구구분코드 */,
    TO_CHAR(A.SRECS_REL_AMT,'999,999,999,999') AS SRECS_REL_AMT /* 심사재심의관계금액 */,
    TO_CHAR(A.SRECS_RLPR_NOPE) AS SRECS_RLPR_NOPE /* 심사재심의관계자인원수 */,
    A.SRECS_INST_CD /* 심사재심의기관코드 */,
    A.SRECS_CLMT_NM /* 심사재심의청구인명 */,
    A.SRECS_AGT_NM /* 심사재심의대리인명 */,
    A.SRECS_CORP_SECD /* 심사재심의법인구분코드 */,
    A.SRECS_ISSUE_CN /* 심사재심의이슈내용 */,
    A.SRECS_PRCS_PIC_NM /* 심사재심의처리담당자명 */,
    A.SRECS_ADT_YR /* 심사재심의감사년도 */,
    A.SRECS_ADT_NO /* 심사재심의감사번호 */,
    A.SRECS_DSPS_RQT_SQNO /* 심사재심의처분요구순번 */,
    A.LAST_USER_ID /* 최종사용자아이디 */,
    A.SRECS_PRCS_STUT_CN /* 심사재심의처리상황내용 */,
    A.SRECS_OW_PRCS_RMRK_CN /* 심사재심의사무처리비고내용 */,
    TO_CHAR(A.LAST_MDFCN_DT,'YYYY-MM-DD') AS LAST_MDFCN_DT /* 최종수정일시 */,
    A.SRECS_BAI_DSPS_DEPT_CD /* 심사재심의감사원처분부서코드 */,
    A.SRECS_BAI_DSPS_YN /* 심사재심의감사원처분여부 */,
    B.SRECS_CMT_LDRV_MBCMT_NM /* 심사재심의위원회주심위원위원명 */,
    B.SRECS_SRNG_CLM_PRCS_SECD /* 심사재심의심사청구처리구분코드 */,
    B.SRECS_DCS_KDCD /* 심사재심의의결종류코드 */,
    B.CVLCPT_DOC_ID /* 민원문서아이디 */,
    DECODE(NVL(B.CVLCPT_DOC_ID,''),'','','파일보기') AS ENAIS_ATCH_FILE_NM /* ENAIS첨부파일명 */,
    B.SBCN_NO || '(' || B.SBCN_NMTM || '회)' AS SBCN_NO /* 부의번호 */,
    B.SBCN_NMTM /* 부의횟수 */,
    B.SBCN_YMD /* 부의일자 */,
    TO_DATE(TRIM(B.SBCN_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 부의처리기간 */,
    B.SRECS_DCSN_YMD /* 심사재심의결정일자 */,
    B.SRECS_DCSN_MTTR_CN /* 심사재심의결정사항내용 */,
    B.SRECS_DCSN_NO /* 심사재심의결정번호 */,
    B.SRECS_AMIT_AMT /* 심사재심의용인금액 */,
    B.SRECS_DCSN_YR /* 심사재심의결정년도 */,
    B.SRECS_DCSN_SECD /* 심사재심의결정구분코드 */,
    DECODE(B.SRECS_DCSN_SECD,'1','감심','2','감재심','3','감재판','') AS SRECS_DCSN_SECD /* 심사재심의결정구분코드 */,
    B.DVCF_ATRZ_YMD /* 과장결재일자 */,
    TO_DATE(TRIM(B.DVCF_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 과장처리기간 */,
    B.SRECS_DDG_ATRZ_YMD /* 심사재심의심의관결재일자 */,
    TO_DATE(TRIM(B.SRECS_DDG_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 심의관처리기간 */,
    B.BRUCHF_ATRZ_YMD /* 국장결재일자 */,
    TO_DATE(TRIM(B.BRUCHF_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 국장처리기간 */,
    B.OW_PSD_ATRZ_YMD /* 사무총장결재일자 */,
    TO_DATE(TRIM(B.OW_PSD_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 사무총장처리기간 */,
    B.GNLGR_ATRZ_YMD /* 원장결재일자 */,
    TO_DATE(TRIM(B.GNLGR_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 원장처리기간 */,
    B.SRECS_MBCMT_ATRZ_YMD /* 심사재심의위원결재일자 */,
    TO_DATE(TRIM(B.SRECS_MBCMT_ATRZ_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 위원처리기간 */,
    B.RMRK_CN /* 비고내용 */,
    C.ENFC_YMD /* 시행일자 */,
    TO_DATE(TRIM(C.ENFC_YMD)) - TO_DATE(TRIM(A.SRECS_RCPT_YMD)) || '일' AS TO_DATE /* 시행처리기간 */,
    C.IMPL_YMD /* 집행일자 */,
    C.SRECS_IMPL_CN /* 심사재심의집행내용 */,
    C.SRECS_LWS_RAIS_YMD /* 심사재심의소송제기일자 */,
    C.SRECS_JDGM_YMD /* 심사재심의판결일자 */,
    C.SRECS_JDGM_CN /* 심사재심의판결내용 */,
    C.SRECS_HLDOF_YMD /* 심사재심의보류일자 */,
    C.SRECS_RMV_YMD /* 심사재심의해제일자 */,
    C.SRECS_NYD_PRCS_RSN_CN /* 심사재심의미처분처리사유내용 */,
    C.SRECS_PRCS_PLAN_CN /* 심사재심의처리계획내용 */,
    C.SRECS_OFDOC_NO /* 심사재심의공문번호 */,
    A.SRECS_SMS_SNDNG_YN /* 심사재심의SMS발송여부 */,
    A.SRECS_ANSDOC_SNDNG_YN /* 심사재심의답변서발송여부 */,
    A.SRECS_CLMT_ZIP /* 심사재심의청구인우편번호 */,
    A.SRECS_CLMT_ADDR /* 심사재심의청구인주소 */,
    A.SRECS_CLMT_DADDR /* 심사재심의청구인상세주소 */,
    A.SRECS_PRCS_PIC_TELNO_1 /* 심사재심의처리담당자전화번호1 */,
    A.SRECS_PRCS_PIC_TELNO_2 /* 심사재심의처리담당자전화번호2 */,
    A.SRECS_PRCS_PIC_TELNO_3 /* 심사재심의처리담당자전화번호3 */,
    A.SRECS_CVLCPT_RCPT_NO /* 심사재심의민원접수번호 */,
    NVL(C.SRECS_LWS_YN,'N') AS SRECS_LWS_YN /* 심사재심의소송여부 */,
    C.SRECS_FRTRL_CT_NM /* 심사재심의1심법원명 */,
    C.SRECS_FRTRL_INCDNT_NO_CN /* 심사재심의1심사건번호내용 */,
    C.SRECS_LAST_RSLT_CN /* 심사재심의최종결과내용 */
FROM TBBADFRE012M A , TBBADFRE012D B , TBBADFRE013D C WHERE 1=1 AND A.CVLCPT_RCPT_YR = B.CVLCPT_RCPT_YR(+) AND A.SRECS_RCPT_SECD = B.SRECS_RCPT_SECD(+) AND A.SRECS_RCPT_SQNO = B.SRECS_RCPT_SQNO(+) AND A.SRECS_DEPT_CD = B.SRECS_DEPT_CD(+) AND A.CVLCPT_RCPT_YR = C.CVLCPT_RCPT_YR(+) AND A.SRECS_RCPT_SECD = C.SRECS_RCPT_SECD(+) AND A.SRECS_RCPT_SQNO = C.SRECS_RCPT_SQNO(+) AND A.SRECS_DEPT_CD = C.SRECS_DEPT_CD(+) AND A.SRECS_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#S_CNB#, #strDptAuth#, '', #strUpSpvBrdvCd#))) AND (A.SRECS_SRNG_CLM_SECD IS NOT NULL AND A.SRECS_SRNG_CLM_SECD NOT IN ('40', '41', '42', '43', '49') ) AND (A.SRECS_SRNG_CLM_SECD IS NOT NULL AND A.SRECS_SRNG_CLM_SECD IN ('40', '41', '42', '43', '49') ) AND A.CVLCPT_RCPT_YR = #CVLCPT_RCPT_YR# AND A.SRECS_RCPT_SECD = #SRECS_RCPT_SECD# AND A.SRECS_RCPT_SQNO = #SRECS_RCPT_SQNO# AND A.INST_CD = #INST_CD# AND SUBSTR(C.ENFC_YMD,0,4) = #strEnfDt# AND A.NTFCTN_RCPT_YMD = #NTFCTN_RCPT_YMD# AND A.PRCS_TERM_YMD = #PRCS_TERM_YMD# AND A.SRECS_DEPT_CD = #SRECS_DEPT_CD# AND (C.ENFC_YMD IS NULL AND B.SBCN_YMD IS NULL) AND (C.ENFC_YMD IS NOT NULL OR B.SBCN_YMD IS NOT NULL) AND B.SRECS_DCS_KDCD = #SRECS_DCS_KDCD# AND B.SRECS_DCS_KDCD IN ('1','2','3','4','5') AND A.SRECS_CLMT_NM LIKE '%' || #strReqr# || '%' AND (A.SRECS_PRCS_PIC_NM LIKE '%' || #strSchTxt# || '%' OR A.RSCH_ASMT_TTL LIKE '%' || #strSchTxt# || '%' OR A.SRECS_ISSUE_CN LIKE '%' || #strSchTxt# || '%' OR B.SRECS_DCSN_MTTR_CN LIKE '%' || #strSchTxt# || '%' OR C.SRECS_JDGM_CN LIKE '%' || #strSchTxt# || '%' /* 추가 - 2015.05.26 yyh */ OR C.SRECS_FRTRL_CT_NM LIKE '%' || #strSchTxt# || '%' OR C.SRECS_FRTRL_INCDNT_NO_CN LIKE '%' || #strSchTxt# || '%' OR C.SRECS_LAST_RSLT_CN LIKE '%' || #strSchTxt# || '%' ) AND B.DVCF_ATRZ_YMD IS NOT NULL AND B.BRUCHF_ATRZ_YMD IS NOT NULL AND B.OW_PSD_ATRZ_YMD IS NOT NULL AND B.GNLGR_ATRZ_YMD IS NOT NULL AND B.SRECS_MBCMT_ATRZ_YMD IS NOT NULL AND B.SBCN_YMD IS NOT NULL AND C.ENFC_YMD IS NOT NULL ) DT ORDER BY CVLCPT_RCPT_YR DESC, SRECS_RCPT_SQNO DESC ) T ) TT WHERE NUM BETWEEN (((#currPage#- 1) * #strPagingCnt#) + 1) AND (#currPage# * #strPagingCnt#)