SELECT TT.*,
    ROWNUM
FROM ( SELECT D2.REPORT_NAME,
    D2.REPORT_CODE,
    D2.REPORT_PATH,
    D2.MODULE_CODE,
    COUNT(D1.LOG_ATTRIBUTE1) AS LOG_ATTRIBUTE1,
    D3.FOLDER_NAME
FROM MTX_LOG D1 INNER JOIN MTX_REPORT D2 ON D1.LOG_ATTRIBUTE1 = D2.REPORT_CODE INNER JOIN MTX_FOLDER D3 ON D2.FOLDER_CODE = D3.FOLDER_CODE WHERE D1.LOG_TIME >= TO_CHAR(SYSDATE,'YYYY')||'-01-01' AND D1.LOGTYPE_CODE = 40 AND EXISTS ( SELECT TRGT_NOP_ENO /* 대상인원직원전산번호 */
FROM TBDCMACM001M M WHERE M.TRGT_NOP_ENO||'::'||M.SRECS_DEPT_CD = D1.USER_CODE AND M.USER_ID = #USER_ID# ) GROUP BY D2.REPORT_NAME ,D2.REPORT_CODE ,D2.REPORT_PATH ,D2.MODULE_CODE ,D3.FOLDER_NAME ORDER BY CNT DESC ) TT WHERE ROWNUM < 9