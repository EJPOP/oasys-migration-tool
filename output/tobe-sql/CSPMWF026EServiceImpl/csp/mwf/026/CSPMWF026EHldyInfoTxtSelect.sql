SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| HLDY_INFO_TXT ) ORDER BY HLDY_INFO_TXT), '//text()'), 3) AS SUBSTR
FROM ( SELECT '(' || TO_CHAR(TO_DATE(T2.HLDY), 'YYYY-MM-DD') || ') ' || T2.HLDY_RSN_TXT AS TO_CHAR
FROM (SELECT TO_CHAR(TO_DATE(#strStdDt#) - 7 + LEVEL + (SELECT NEXT_DAY(TO_DATE(#strStdDt#), 1) - TO_DATE(#strStdDt#)
FROM DUAL), 'YYYYMMDD') AS DT FROM DUAL CONNECT BY LEVEL <= 5) T1 ,TBCSPMWF011M T2 WHERE BOKG_DVSN_CD = '1' /* 예약구분코드(1:한의과,2:안마기) */ AND T1.DT = T2.HLDY )