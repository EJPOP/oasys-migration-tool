SELECT /* csp.bii.service.impl.CSPBII111QServiceImpl.CSPBII111QMainSelect */ A.INFO_YR || '-' || A.FRS_MDM_SQNO AS INFO_YR /* 정보년도 */,
    CASE WHEN SUBSTR(F_CODE_NM('1000097', A.INFO_SECD), 1, 2) is not null THEN '(' || SUBSTR(F_CODE_NM('1000097', A.INFO_SECD), 1, 2) || ')' || A.DSPS_RQT_NM ELSE A.DSPS_RQT_NM END AS DSPS_RQT_NM /* 처분요구명 */,
    (SELECT B.PROF_RBPRSN_INST_NM AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M B WHERE B.INST_CD = A.REL_INST_CD) AS REL_ORG_NM /* 관련기관명 */ , NVL(F_CODE_NM('1000039', A.PRCS_DRCTN_SECD), '-') AS HNDL_ORD_NM /* 처리지시명 */ , NVL(F_CODE_NM('1000042', A.PRCS_RSLT_SECD), '-') AS HNDL_RSLT_NM /* 처리결과명 */ , F_CODE_NM('1000085', A.ADT_INFO_PRGRS_STTS_SECD) AS AUD_INF_PRSS_STA_NM /* 감사정보진행상태명 */ , (SELECT B.USER_NM /* 사용자명 */
FROM TBDCMACM001M B WHERE B.TRGT_NOP_ENO = A.PRSNR_ENO) AS PRSNR_NM /* 제출자성명 */ , TO_CHAR(TO_DATE(A.TRNF_YMD, 'YYYYMMDD'), 'YYYY.MM.DD') AS TRNF_YMD /* 이송일 */ , TO_CHAR(TO_DATE(A.TRNF_RCPT_YMD, 'YYYYMMDD'), 'YYYY.MM.DD') AS TRNF_RCPT_YMD /* 이송접수일 */ , TO_CHAR(TO_DATE(A.PRCS_YMD, 'YYYYMMDD'), 'YYYY.MM.DD') AS PRCS_YMD /* 처리일 */ , TO_CHAR(TO_DATE(A.CMPTN_YMD, 'YYYYMMDD'), 'YYYY.MM.DD') AS CMPTN_YMD /* 완료일 */ , A.RLS_YN /* 공개여부 */ , A.ADT_INFO_PRGRS_STTS_SECD /* 감사정보진행상태코드 */ , A.INFO_YR /* 연도 */ , A.FRS_MDM_SQNO /* 일련번호 */ FROM TB_CSPBII100M A WHERE A.ADT_INFO_PRGRS_STTS_SECD >= '15' AND A.ADT_INFO_PRGRS_STTS_SECD <> '30' AND A.INFO_YR = #INFO_YR# AND A.FRS_MDM_SQNO = #FRS_MDM_SQNO# AND (A.DSPS_RQT_NM LIKE '%' || #strSrhTxt# || '%' OR EXISTS (SELECT 1
FROM TB_CSPBII101L B WHERE INSTR(B.SRCH_ADT_INFO_CN, #strSrhTxt#, 1, 1) > 0 AND B.INFO_YR = A.INFO_YR AND B.INFO_SQNO = A.FRS_MDM_SQNO)) AND A.ETC_LBSVC_MNG_DEPT_CD = #ETC_LBSVC_MNG_DEPT_CD# AND A.ADT_INFO_PRGRS_STTS_SECD IN ( '15', '20', '32', '24', /* [15:이송완료], [20:이송접수], [32:찜해제], [24:처리반려] */ '31', /* [31:감사중(찜)] */ '21', '22', '23', /* [21:처리작성], [22:처리결재중], [23:처리승인] */ '00') AND A.ADT_INFO_PRGRS_STTS_SECD = '99' ORDER BY A.INFO_YR , A.FRS_MDM_SQNO