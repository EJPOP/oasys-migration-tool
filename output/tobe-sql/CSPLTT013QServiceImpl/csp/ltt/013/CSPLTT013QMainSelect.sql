SELECT T1.*,
    ROWNUM
FROM ( SELECT /* csp.ltt.service.impl.CSPLTT013EServiceImpl.CSPLTT013EMainSelect */ A.TK_YE /* 생각연도 */,
    A.TK_SLN /* 생각연번 */,
    CASE WHEN DGUARD.DECRYPT('TB_ENC','EAN', A.TRGT_NOP_ENO) = '3223' THEN '' /* 요청에 의한 하드코딩 이름숨김 */ WHEN TK_YE = '2022' AND TK_SLN IN ('1','25','38') THEN '' /* 요청에 의한 하드코딩 이름숨김 */ WHEN NAM_OPEN_YN = 'Y' THEN F_USR_INFO(DGUARD.DECRYPT('TB_ENC','EAN', A.TRGT_NOP_ENO), 2) WHEN NAM_OPEN_YN = 'N' THEN '익명' ELSE '익명' END AS USER_NM /* 사용자명 */,
    CASE WHEN NAM_OPEN_YN = 'Y' THEN F_DPT_INFO(DGUARD.DECRYPT('TB_ENC','EAN', A.SRECS_DEPT_CD), 1) WHEN NAM_OPEN_YN = 'N' THEN '' ELSE '' END AS CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */,
    A.SBMSN_YMD /* 제출일자 */,
    A.ACP_YE /* 접수연도 */,
    A.NTFCTN_RCPT_SQNO /* 통보접수순번 */,
    A.RLS_YN /* 공개여부 */,
    A.RLS_YMD /* 공개일자 */,
    CASE WHEN A.RLS_YN = 'Y' THEN A.RSCH_ASMT_TTL WHEN A.RLS_YN = 'N' THEN '해당 생각거리는 숨김처리되었습니다.(클릭시 숨김사유 확인)' ELSE '해당 생각거리는 숨김처리되었습니다.(클릭시 숨김사유 확인)' END AS RSCH_ASMT_TTL /* 연구과제제목 */,
    CASE WHEN NVL(A.MDT_YN,'N') = 'Y' AND A.PRGRS_STTS_SECD IN ('M', 'N') THEN F_DPT_INFO(A.MDT_DPT_CD, 1) ELSE F_DPT_INFO(A.EXAM_DPT_CD, 1) END AS MDT_YN,
    F_CODE_NM('1000992',A.PRGRS_STTS_SECD) AS F_CODE_NM,
    (SELECT COUNT(*)
FROM TBCSPLTT003M WHERE TK_YE = A.TK_YE AND TK_SLN = A.TK_SLN AND RCMD_YN = 'Y') AS RCMR_CNT /* 추천수 */ , (SELECT COUNT(*)
FROM TBCSPLTT003M WHERE TK_YE = A.TK_YE AND TK_SLN = A.TK_SLN AND RCMD_YN = 'N') AS DCMR_CNT /* 비추천수 */ , ENAIS_PST_INQ_NMTM /* 조회수 */ , (SELECT COUNT(*)
FROM TBCSPLTT004M WHERE TK_YE = A.TK_YE AND TK_SLN = A.TK_SLN) AS CMMT_CNT /* 댓글수 */ , DECODE(SIGN(60 - (TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) - TO_DATE(A.RLS_YMD))),'1',60 - (TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) - TO_DATE(A.RLS_YMD)),'0') AS DEL_DT , CASE WHEN TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) 0 THEN 'Y' ELSE 'N' END AS CMT_NEW_YN , CASE WHEN NVL(A.MDT_YN,'N') = 'Y' AND A.PRGRS_STTS_SECD IN ('M', 'N') AND TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) 'Y' AND A.PRGRS_STTS_SECD IN ('M', 'N') AND TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) A.RSCH_ASMT_TTL LIKE '%'||#titNm#||'%' A.RLS_YMD BETWEEN #strOpenDt# AND #endOpenDt# ORDER BY TO_NUMBER(ACP_YE) ASC, TO_NUMBER(NTFCTN_RCPT_SQNO) ASC) T1