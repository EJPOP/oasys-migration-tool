SELECT MEAL_DT,
    MEAL_PEN_CNB,
    F_USR_INFO(MEAL_PEN_CNB, '2') AS F_USR_INFO,
    F_DPT_INFO(F_USR_INFO(MEAL_PEN_CNB, '5'), '1') AS CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */,
    BOKG_YN,
    NVL(MEAL_YN, 'N') AS MEAL_YN,
    DECODE(BOKG_YN, 'Y', '1', '0') AS BOKG_YN,
    DECODE(MEAL_YN, 'Y', '1', '0') AS MEAL_YN
FROM TBCSPMWF003M WHERE MEAL_DT BETWEEN #fromYmd# AND #toYmd# AND BOKG_CNL_YN = 'N' AND MEAL_PEN_CNB IN (SELECT TRGT_NOP_ENO /* 대상인원직원전산번호 */
FROM TBCSPMWF005M) AND MEAL_PEN_CNB NOT IN (SELECT TRGT_NOP_ENO /* 대상인원직원전산번호 */
FROM TBCSPMWF005M) AND MEAL_PEN_CNB = #CNB# AND (BOKG_YN != 'N' OR MEAL_YN != 'N') ORDER BY MEAL_DT, MEAL_PEN_CNB