SELECT D1.CVLCPT_ADT_YR AS CVLCPT_ADT_YR /* 민원감사년도 */,
    D1.ADT_NO AS ADT_NO /* 감사번호 */,
    D1.ADT_KDCD AS ADT_KDCD /* 감사종류코드 */,
    D1.ADT_GRNT_NO AS ADT_GRNT_NO /* 감사부여번호 */,
    F_CODE_NM('1000753',D1.ADT_CNTRL_SECD) AS F_CODE_NM,
    F_MNG_KND_AUDYRNO(D1.CVLCPT_ADT_YR, D1.ADT_NO, D1.ADT_KDCD, '-') AS ADT_CLSF_NO /* 감사분류번호 */,
    CASE WHEN D1.CVLCPT_ADT_YR >= '2016' THEN SUBSTR(D1.ADT_KDCD,3,1) ELSE '' END AS CVLCPT_ADT_YR /* 민원감사년도 */,
    CASE WHEN D1.CVLCPT_ADT_YR >= '2016' THEN F_CODE_NM('1000739',SUBSTR(D1.ADT_KDCD,3,1)) ELSE '-' END AS CVLCPT_ADT_YR /* 민원감사년도 */,
    D1.CVLCPT_ADT_YR||'-'||D1.ADT_KDCD||'-'||D1.ADT_NO AS CVLCPT_ADT_YR /* 민원감사년도 */,
    F_DPT_INFO(D1.SPRVSN_DEPT_CD,'1') AS F_DPT_INFO,
    F_CODE_NM('1000007', D1.ADT_KDCD) AS F_CODE_NM,
    F_CODE_NM('1000751',D1.BZTRP_BGT_SECD) AS F_CODE_NM,
    D1.ADT_MTTR_NM AS ADT_MTTR_NM /* 감사사항명 */,
    F_ORG_INFO(D1.ADT_RPRS_INST_CD,'1') AS F_ORG_INFO,
    F_DPT_INFO(D1.MNG_DEPT_CD,'1') AS F_DPT_INFO,
    D1.MNG_DEPT_CD AS MNG_DEPT_CD /* 관리부서코드 */,
    F_CODE_NM('1000742',D1.CLM_SECD) AS CLM_SE_NM /* 청구구분명 */,
    CASE WHEN D1.PRGRS_STP_SECD LIKE 'A10%' THEN (SELECT AS ADT_STP_NM /* 감사단계명 */
FROM TB_BADDED101M WHERE CVLCPT_ADT_YR = D1.CVLCPT_ADT_YR AND ADT_NO = D1.ADT_NO AND ADT_STP_SECD = D1.PRGRS_STP_SECD) ELSE F_CODE_NM('1000475',CASE WHEN SUBSTR(D1.ADT_KDCD,3) = '55' THEN '' WHEN D3.ACADT_PRCS_STTS_SECD = '9' THEN '10' ELSE CASE WHEN TRIM(D3.ENFC_ATRZ_YMD) IS NOT NULL THEN '10' WHEN TRIM(D3.LDRV_MBCMT_ATRZ_YMD)IS NOT NULL THEN '09' WHEN TRIM(D3.OW_DHD_ATRZ_YMD) IS NOT NULL THEN '08' WHEN TRIM(D3.JDAF_SRNG_OFER_ATRZ_YMD) IS NOT NULL THEN '07' WHEN TRIM(D3.AJMT_DDG_ATRZ_YMD) IS NOT NULL THEN '06' WHEN TRIM(D3.AJMT_OFER_ATRZ_YMD)IS NOT NULL THEN '05' WHEN TRIM(D3.AB_ATRZ_YMD)IS NOT NULL THEN '04' WHEN TRIM(D3.DAG_RPT_YMD) IS NOT NULL THEN '03' ELSE (CASE WHEN (CASE WHEN (D3.ACADT_PRCS_STTS_SECD = '1' AND TO_DATE(D3.DAG_YMD) > TO_DATE(SYSDATE)) THEN '7' WHEN ((D3.ACADT_PRCS_STTS_SECD = '1' AND TRIM(D3.PRCS_TERM_YMD) IS NULL) OR D3.ACADT_PRCS_STTS_SECD = '3') OR (D3.ACADT_PRCS_STTS_SECD = '1'AND NVL(TO_DATE(D3.PRCS_TERM_YMD),'99991231') TO_DATE(SYSDATE)) THEN '7' WHEN ((D3.ACADT_PRCS_STTS_SECD = '1' AND TRIM(D3.PRCS_TERM_YMD) IS NULL) OR D3.ACADT_PRCS_STTS_SECD = '3') OR (D3.ACADT_PRCS_STTS_SECD = '1'AND NVL(TO_DATE(D3.PRCS_TERM_YMD),'99991231') TO_DATE(SYSDATE)) THEN '7' WHEN ((D3.ACADT_PRCS_STTS_SECD = '1' AND TRIM(D3.PRCS_TERM_YMD) IS NULL) OR D3.ACADT_PRCS_STTS_SECD = '3') OR (D3.ACADT_PRCS_STTS_SECD = '1'AND NVL(TO_DATE(D3.PRCS_TERM_YMD),'99991231') '5' /*확인출장은 조회하지 않음*/ AND D1.MNG_DEPT_CD NOT IN ('100000','100100') AND D1.CVLCPT_ADT_YR >= #strAudYrStr# AND D1.CVLCPT_ADT_YR AND D1.ADT_KDCD LIKE '%' || SUBSTR(#strAudKndCd#,3,1) AND D1.ADT_MTTR_NM LIKE '%'||#strAudSbjNm#||'%'