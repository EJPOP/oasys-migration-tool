SELECT MAN.CHGR_DVSN_NM AS CHGR_DVSN_NM /* 단계구분 */,
    MAN.INFO_RLPR_NM AS INFO_RLPR_NM /* 정보관계자명 */,
    F_CODE_NM('1000274', EVL.EVL_RK_CD) AS F_CODE_NM /* 평가등급 */,
    F_CODE_NM('1000280', NVL(EVL_STA_CD, '100')) AS F_CODE_NM
FROM ( SELECT '평가자' AS CHGR_DVSN_NM,
    F_USR_INFO(D1.PIC_ENO, '2') AS INFO_RLPR_NM /* 정보관계자명 */,
    D1.EVL_YR,
    D1.HLYR_DVSN_CD,
    D1.CVLCPT_TASK_SECD /* 민원업무구분코드 */,
    D1.AUD_TSK_KND_CD,
    D1.CHGR_DVSN_CD,
    D1.PIC_ENO /* 담당자직원전산번호 */,
    #strTskNo# AS #STRTSKNO#
FROM TBCSPAOE017D D1 WHERE 1=1 AND D1.EVL_YR = #strEvlYr# AND D1.HLYR_DVSN_CD = #strHlyrDvsnCd# AND D1.CVLCPT_TASK_SECD = #CVLCPT_TASK_SECD# AND D1.AUD_TSK_KND_CD = #strAudTskKndCd# AND D1.CHGR_DVSN_CD = ( SELECT CASE WHEN LENGTH(#strChgrDvsnCd#) = '4' THEN 'CD' || LPAD(TO_NUMBER(SUBSTR(#strChgrDvsnCd#, 3)) - 1, 2, 0) ELSE 'CD' || TRIM(LPAD(TO_NUMBER(SUBSTR(#strChgrDvsnCd#, 3)) - 1, 3)) END AS LENGTH
FROM DUAL ) /*해당 업무종류의 평가자를 찾아야한다.*/ ) MAN , TBCSPAOE029M EVL WHERE MAN.EVL_YR = EVL.EVL_YR (+) AND MAN.HLYR_DVSN_CD = EVL.HLYR_DVSN_CD (+) AND MAN.CVLCPT_TASK_SECD = EVL.CVLCPT_TASK_SECD (+) AND MAN.AUD_TSK_KND_CD = EVL.AUD_TSK_KND_CD (+) AND MAN.CHGR_DVSN_CD = EVL.EVL_CMTR_DVSN_CD (+) AND MAN.PIC_ENO = EVL.EVL_CMTR_CNB (+) AND MAN.TSK_NO = EVL.TSK_NO (+)