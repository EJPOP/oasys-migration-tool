MERGE INTO TB_CSPDCP204L A USING (SELECT #CLM_SECD# AS CLM_SECD /* 청구구분코드 */,
    #CVLCPT_RCPT_YR# AS CVLCPT_RCPT_YR /* 민원접수년도 */,
    #CVLCPT_RCPT_RCPT# AS CVLCPT_RCPT_RCPT /* 민원접수번호 */,
    #DGE# AS TPOF_CYCL /* 제보차수 */,
    #LAW_HIS_SRNO# AS CVLCPT_STT_DSCTN_SQNO /* 민원법령내역순번 */,
    #LAW_LNK_ID# AS CVLCPT_STT_LNKG_ID /* 민원법령연결아이디 */
FROM DUAL) B ON (A.CLM_SECD = B.CLM_SECD AND A.CVLCPT_RCPT_YR = B.CVLCPT_RCPT_YR AND A.TPOF_CYCL = B.TPOF_CYCL AND A.CVLCPT_RCPT_RCPT = B.CVLCPT_RCPT_RCPT AND A.CVLCPT_STT_DSCTN_SQNO = B.CVLCPT_STT_DSCTN_SQNO AND A.CVLCPT_STT_LNKG_ID = B.CVLCPT_STT_LNKG_ID) WHEN MATCHED THEN UPDATE SET A.SLCT_STT_DTL_CN = #SLCT_STT_DTL_CN# /* 청탁법령상세내용 */, A.LAST_USER_ID = #LAST_USER_ID# /* 최종사용자아이디 */, A.LAST_PRCS_DEPT_CD = #LAST_PRCS_DEPT_CD# /* 최종처리부서코드 */, A.LAST_MENU_ID = #LAST_MENU_ID# /* 최종메뉴아이디 */, A.LAST_MDFCN_DT = SYSDATE WHEN NOT MATCHED THEN INSERT INSERT (CLM_SECD, CVLCPT_RCPT_YR, CVLCPT_RCPT_RCPT, TPOF_CYCL, CVLCPT_STT_DSCTN_SQNO, CVLCPT_STT_LNKG_ID, SLCT_STT_DTL_CN, FRST_USER_ID, LAST_USER_ID, LAST_PRCS_DEPT_CD, LAST_MENU_ID, FRST_REG_DT, LAST_MDFCN_DT) VALUES (#CLM_SECD#,#CVLCPT_RCPT_YR#,#CVLCPT_RCPT_RCPT#,#DGE#, (SELECT NVL(MAX(CVLCPT_STT_DSCTN_SQNO), 0) +1 AS CVLCPT_STT_DSCTN_SQNO /* 민원법령내역순번 */
FROM TB_CSPDCP204L WHERE CLM_SECD = #CLM_SECD# AND CVLCPT_RCPT_YR = #CVLCPT_RCPT_YR# AND CVLCPT_RCPT_RCPT = #CVLCPT_RCPT_RCPT#) , #LAW_LNK_ID#, #SLCT_STT_DTL_CN#, #LAST_USER_ID#,#LAST_USER_ID#,#LAST_PRCS_DEPT_CD#,#LAST_MENU_ID#,SYSDATE,SYSDATE)