SELECT STT_YR || '-' || STT_MNTR_SQNO AS STT_YR /* 법령년도 */,
    CASE WHEN #strDtKind# = '01' THEN DECODE(DATA_OCRN_YMD, NULL, NULL, SUBSTR(DATA_OCRN_YMD, 1, 4) || '.' || SUBSTR(DATA_OCRN_YMD, 5, 2) || '.' || SUBSTR(DATA_OCRN_YMD, 7, 2)) /*발생일자-자료발생일*/ WHEN #strDtKind# = '02' THEN DECODE(CLSF_YMD, NULL, NULL, SUBSTR(CLSF_YMD, 1, 4) || '.' || SUBSTR(CLSF_YMD, 5, 2) || '.' || SUBSTR(CLSF_YMD, 7, 2)) /*분류일자-분류일*/ WHEN #strDtKind# = '03' THEN DECODE(GMD_RCPT_YMD, NULL, NULL, SUBSTR(GMD_RCPT_YMD, 1, 4) || '.' || SUBSTR(GMD_RCPT_YMD, 5, 2) || '.' || SUBSTR(GMD_RCPT_YMD, 7, 2)) /*분류접수일자-총괄과 접수일*/ WHEN #strDtKind# = '04' THEN DECODE(OPNN_SBMSN_YMD, NULL, NULL, SUBSTR(OPNN_SBMSN_YMD, 1, 4) || '.' || SUBSTR(OPNN_SBMSN_YMD, 5, 2) || '.' || SUBSTR(OPNN_SBMSN_YMD, 7, 2)) /*의견제출일자-의견제출일*/ WHEN #strDtKind# = '05' THEN DECODE(OPNN_RCPT_YMD, NULL, NULL, SUBSTR(OPNN_RCPT_YMD, 1, 4) || '.' || SUBSTR(OPNN_RCPT_YMD, 5, 2) || '.' || SUBSTR(OPNN_RCPT_YMD, 7, 2)) /*의견접수일자-의견저접수일*/ WHEN #strDtKind# = '06' THEN DECODE(RPLY_DMND_YMD, NULL, NULL, SUBSTR(RPLY_DMND_YMD, 1, 4) || '.' || SUBSTR(RPLY_DMND_YMD, 5, 2) || '.' || SUBSTR(RPLY_DMND_YMD, 7, 2)) /*회신요청일자-회신요청일*/ WHEN #strDtKind# = '07' THEN DECODE(RPLY_DMND_RCPT_YMD, NULL, NULL, SUBSTR(RPLY_DMND_RCPT_YMD, 1, 4) || '.' || SUBSTR(RPLY_DMND_RCPT_YMD, 5, 2) || '.' || SUBSTR(RPLY_DMND_RCPT_YMD, 7, 2)) /*회신요청저접수일자-회신요청접수일*/ WHEN #strDtKind# = '08' THEN DECODE(PRCS_OPNN_RPLY_YMD, NULL, NULL, SUBSTR(PRCS_OPNN_RPLY_YMD, 1, 4) || '.' || SUBSTR(PRCS_OPNN_RPLY_YMD, 5, 2) || '.' || SUBSTR(PRCS_OPNN_RPLY_YMD, 7, 2)) /*처리의견회신일-처리의견회신일*/ WHEN #strDtKind# = '09' THEN DECODE(OPNN_CFMTN_YMD, NULL, NULL, SUBSTR(OPNN_CFMTN_YMD, 1, 4) || '.' || SUBSTR(OPNN_CFMTN_YMD, 5, 2) || '.' || SUBSTR(OPNN_CFMTN_YMD, 7, 2)) /*의견확정일자-의견확정일*/ WHEN #strDtKind# = '10' THEN DECODE(CBT_MTG_RCPT_YMD, NULL, NULL, SUBSTR(CBT_MTG_RCPT_YMD, 1, 4) || '.' || SUBSTR(CBT_MTG_RCPT_YMD, 5, 2) || '.' || SUBSTR(CBT_MTG_RCPT_YMD, 7, 2)) /*사후개시일자-국무회의상정일*/ WHEN #strDtKind# = '11' THEN DECODE(EPFC_PRCS_OPNN_RPLY_YMD, NULL, NULL, SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 1, 4) || '.' || SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 5, 2) || '.' || SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 7, 2)) /*사후처리의견회신일-사후처리 처리의견 회신일*/ WHEN #strDtKind# = '12' THEN DECODE(CPLT_YMD, NULL, NULL, SUBSTR(CPLT_YMD, 1, 4) || '.' || SUBSTR(CPLT_YMD, 5, 2) || '.' || SUBSTR(CPLT_YMD, 7, 2)) /*완결일자-완결일*/ ELSE '' END AS #STRDTKIND# /* 발생일자 */,
    F_CODE_NM('1000253', DATA_CLSF_SECD) AS F_CODE_NM /* 자료구분 */,
    F_DPT_INFO(NVL(TKCG_DEPT_CD, GMD_DEPT_CD),'1') AS CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */,
    NVL2(TKCG_DEPT_CD, 1, 2) AS NVL2 /* 담당과부서코드가 있으면 검정색 없으면 빨간색 */,
    (SELECT AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = TBBADCMR011M.JRSD_MAO_SECD) AS COPT_GD_NM /*소관기관*/ , CASE WHEN STT_KDCD IS NOT NULL THEN '('|| F_CODE_NM('1000254',STT_KDCD) || ')' || MNTR_NM ELSE MNTR_NM END AS MNTR_NM /*모니터링 사항*/ , F_CODE_NM('1000256', ADT_MNTR_PRCS_STTS_SECD) AS AUD_MNT_HNDL_STA_NM /*처리상태*/ , ADT_MNTR_PRCS_STTS_SECD AS ADT_MNTR_PRCS_STTS_SECD /*처리상태코드*/ , NVL2(TRIM(REL_EMPHS_MNG_STT_YR), 'O', 'X') AS REL_EMPHS_MNG_STT_YR /*중점*/ , DECODE(NVL(PRCS_OPNN_YN, 'N'), 'Y', 'O', 'X') AS PRCS_OPNN_YN /*의견*/ , NVL2(TRIM(PRCS_OPNN_RPLY_YMD), 'O', '') AS HNDL_OPIN_RPL_YN /*회신*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-001') AS #N/A /*모니터링내용 첨부파일*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-002') AS #N/A /*총괄과 처리의견 첨부파일*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-003') AS DOC_ID_3 /*소관과 처리의견 첨부파일*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-004') AS DOC_ID_4 /*국무회의첨부파일*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-005') AS DOC_ID_5 /*총괄과 사후처리내용 첨부파일*/ , (SELECT CVLCPT_DOC_ID /* 민원문서아이디 */
FROM TB_BADCMR012M WHERE STT_YR = TBBADCMR011M.STT_YR AND STT_MNTR_SQNO = TBBADCMR011M.STT_MNTR_SQNO AND ADT_PLAN_DOC_TPCD = 'AD-MR-006') AS DOC_ID_6 /*소관과 사후처리내용 첨부파일*/ , STT_YR , STT_MNTR_SQNO , DATA_CLSF_SECD , TKCG_DEPT_CD /*담당과부서코드*/ FROM TB_BADCMR011M WHERE 1 = 1 ADT_MNTR_PRCS_STTS_SECD IN #strAudMntHndStaCd[]# NVL(ADT_MNTR_PRCS_STTS_SECD, 'N') = 'N' AND PRCS_OPNN_YN = #PRCS_OPNN_YN# /*의견구분*/ AND NVL2(TRIM(PRCS_OPNN_RPLY_YMD), 'Y', 'N') = #strHndlOpinRplDt# /*회신여부*/ AND EPFC_PRCS_RFLT_YN_SECD = #EPFC_PRCS_RFLT_YN_SECD# /*사후처리구분 - 조회조건(의견반영여부) */ AND DATA_OCRN_YMD >= #strFromDt# AND DATA_OCRN_YMD AND CLSF_YMD >= #strFromDt# AND CLSF_YMD AND ( GMD_RCPT_YMD >= #strFromDt# OR CPD_RCPT_YMD >= #strFromDt# ) AND ( GMD_RCPT_YMD AND OPNN_SBMSN_YMD >= #strFromDt# AND OPNN_SBMSN_YMD AND OPNN_RCPT_YMD >= #strFromDt# AND OPNN_RCPT_YMD AND RPLY_DMND_YMD >= #strFromDt# AND RPLY_DMND_YMD AND RPLY_DMND_RCPT_YMD >= #strFromDt# AND RPLY_DMND_RCPT_YMD AND PRCS_OPNN_RPLY_YMD >= #strFromDt# AND PRCS_OPNN_RPLY_YMD AND OPNN_CFMTN_YMD >= #strFromDt# AND OPNN_CFMTN_YMD AND CBT_MTG_RCPT_YMD >= #strFromDt# AND CBT_MTG_RCPT_YMD AND EPFC_PRCS_OPNN_RPLY_YMD >= #strFromDt# AND EPFC_PRCS_OPNN_RPLY_YMD AND CPLT_YMD >= #strFromDt# AND CPLT_YMD AND NVL2(TRIM(CBT_MTG_RCPT_YMD), 'Y', 'N') = #strCbtCfrBillDt# /*국무회의 상정여부*/ AND NVL2(TRIM(REL_EMPHS_MNG_STT_YR), 'Y', 'N') = #strRelDpsMngLawYe# /*중점관리법령 대상여부*/ AND DATA_CLSF_SECD = #DATA_CLSF_SECD# /*발생구분*/ AND ( GMD_DEPT_CD LIKE SUBSTR(#strDptCd#, 0,2) || '%' OR TKCG_DEPT_CD LIKE SUBSTR(#strDptCd#, 0,2) || '%' ) /*소관과*/ AND ( GMD_PIC_ENO = #CPD_PIC_ENO# OR CPD_PIC_ENO = #CPD_PIC_ENO#) /*담당자*/ AND JRSD_MAO_SECD = #JRSD_MAO_SECD# /*소관기관*/ AND NVL(AUTO_CPLT_YN, 'N') = #strAtCpltYn# /*자동완결여부*/ AND ( UPPER(TRIM(STT_KDCD)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(MNTR_NM)) like '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(MNTR_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CBT_MTG_CN)) like '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(GMD_PRCS_OPNN_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CPD_PRCS_OPNN_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(GMD_EPFC_PRCS_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CPD_EPFC_PRCS_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' ) /*법령명(검색어)*/ ORDER BY STT_YR DESC, STT_MNTR_SQNO DESC