DECLARE BEGIN FOR CS IN ( SELECT CVLCPT_ADT_YR /* 민원감사년도 */,
    ADT_NO /* 감사번호 */,
    LPAD(NVL(TO_NUMBER(#RE_MAX_AUD_GRN_NO#),0) + ROWNUM, 3, '0') AS ADT_GRNT_NO /* 감사부여번호 */
FROM ( SELECT CVLCPT_ADT_YR /* 민원감사년도 */,
    ADT_NO /* 감사번호 */
FROM TBBADDED001M WHERE 1=1 AND ADT_CNTRL_SECD = '3' AND SUBSTR(ADT_KDCD,3,1) = SUBSTR(#strAudKndCd#,3,1) ORDER BY CVLCPT_ADT_YR ,ADT_NO ) ) LOOP UPDATE TB_BADDED001M SET ADT_GRNT_NO = CS.ADT_GRNT_NO /* 감사부여번호 */WHERE CVLCPT_ADT_YR = CS.CVLCPT_ADT_YR AND ADT_NO = CS.ADT_NO ; END LOOP; END;