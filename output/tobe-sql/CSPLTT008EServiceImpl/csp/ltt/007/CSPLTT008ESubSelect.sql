SELECT ROW_NUMBER() OVER (ORDER BY TK_YE, TK_SLN, CMMT_SEQ) AS ROW_NUMBER,
    TK_YE,
    TK_SLN,
    CMMT_SEQ,
    CASE WHEN NAM_OPEN_YN = 'N' THEN '익명' WHEN DGUARD.DECRYPT('TB_ENC','EAN', CRE_CNB) = '3223' THEN '' /* 요청에 의한 하드코딩 이름숨김 */ WHEN NAM_OPEN_YN = 'Y' THEN F_USR_INFO(DGUARD.DECRYPT('TB_ENC','EAN', CRE_CNB), 2) ELSE '익명' END AS NAM_OPEN_YN,
    CASE WHEN NAM_OPEN_YN = 'Y' THEN F_DPT_INFO(DGUARD.DECRYPT('TB_ENC','EAN', CRE_USR_DPT_CD),'1') ELSE '' END AS NAM_OPEN_YN,
    NAM_OPEN_YN,
    CASE WHEN DEL_YN = 'Y' THEN DEL_RSN WHEN DEL_YN = 'N' THEN CONTENT ELSE CONTENT END AS DEL_YN /* 삭제여부 */,
    /* 댓글내용 */ DEL_YN AS DEL_YN /* 삭제여부 */,
    FRST_REG_DT /* 최초등록일시 */,
    CASE WHEN TO_DATE(TO_CHAR(SYSDATE,'YYYYMMDD')) < TO_DATE(TO_CHAR(FRST_REG_DT,'YYYYMMDD'))+3 THEN 'Y' ELSE 'N' END AS TO_DATE
FROM TBCSPLTT004M WHERE 1=1 AND TK_YE = #strTK_YE# AND TK_SLN = #strTK_SLN# ORDER BY TK_YE, TK_SLN, CMMT_SEQ