SELECT TO_CHAR(TO_DATE(D2.ENFC_YMD),'YYYY. MM. DD') AS TO_CHAR /* 실행일자 */,
    D2.ENFC_YMD AS ENFC_YMD /* 시행일자 */,
    D3.SRECS_REL_INST_CD AS SRECS_REL_INST_CD /* 심사재심의관계기관코드 */,
    D3.REL_INST_NM AS REL_INST_NM /* 관계기관명 */,
    D1.DSPS_RQT_NM AS DSPS_RQT_NM /* 처분요구명 */,
    D1.DSPS_RQT_KDCD AS DSPS_RQT_KDCD /* 처분요구종류코드 */,
    F_CODE_NM('1000002',D1.DSPS_RQT_KDCD ) AS DSPS_RQT_KND_CVN /* 처분요구종류코드값명 */,
    (CASE WHEN NVL(DBMS_LOB.GETLENGTH(D4.DSPS_RQT_ACTN_MTTR_CN),0) = 0 THEN D4.DSPS_RQT_ACTN_MTTR_CN ELSE D4.DSPS_RQT_ACTN_MTTR_CN END) AS DSPS_RQT_ACTN_MTTR_CN /* 처분요구조치사항내용 */,
    D4.SVW_WHOL_CN AS SVW_WHOL_CN /* 요약전전체내용 */,
    F_ENFO_INFO(D1.ADT_YR, D1.ADT_NO, D1.DSPS_RQT_SQNO, D3.SRECS_REL_INST_CD ) AS F_ENFO_INFO,
    D1.ADT_YR||D1.ADT_NO||D1.DSPS_RQT_SQNO AS ADT_YR /* 감사년도 */
FROM TB_BADEAR001M D1 , TB_BADEAR002D D2 , ( SELECT CVLCPT_ADT_YR AS CVLCPT_ADT_YR /* 민원감사년도 */,
    ADT_NO AS ADT_NO /* 감사번호 */,
    DSPS_RQT_SQNO AS DSPS_RQT_SQNO /* 처분요구순번 */,
    MIN(SRECS_REL_INST_CD) AS SRECS_REL_INST_CD /* 심사재심의관계기관코드 */,
    F_ORG_INFO(MIN(SRECS_REL_INST_CD),'1') AS REL_INST_NM /* 관계기관명 */
FROM TBBADEAR006M WHERE CVLCPT_ADT_YR||ADT_NO||DSPS_RQT_SQNO IN ($strDspRqSno$) GROUP BY CVLCPT_ADT_YR , ADT_NO, DSPS_RQT_SQNO ) D3 , TB_BADEAR005M D4 WHERE 1=1 AND D1.ADT_YR = D2.ADT_YR AND D1.ADT_NO = D2.ADT_NO AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO AND D1.ADT_YR = D3.CVLCPT_ADT_YR(+) AND D1.ADT_NO = D3.ADT_NO(+) AND D1.DSPS_RQT_SQNO = D3.DSPS_RQT_SQNO(+) AND D1.ADT_YR = D4.ADT_YR(+) AND D1.ADT_NO = D4.ADT_NO(+) AND D1.DSPS_RQT_SQNO = D4.DSPS_RQT_SQNO(+) AND D1.ADT_YR||D1.ADT_NO||D1.DSPS_RQT_SQNO IN ($strDspRqSno$)