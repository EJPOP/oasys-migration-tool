SELECT CASE WHEN #strSpCnMngStaCd# = '1' THEN '지정접수' WHEN #strSpCnMngStaCd# = '2' THEN '지정확정' WHEN #strSpCnMngStaCd# = '3' THEN '해제접수' WHEN #strSpCnMngStaCd# = '4' THEN '해제확정' ELSE '전체' END AS #STRSPCNMNGSTACD# /* 지정구분 */,
    CASE WHEN #strDptCd# = '' THEN '전체' ELSE F_DPT_INFO(#strDptCd#,'1') END AS #STRDPTCD# /* 주관국과 */,
    #strSchTxt# AS #STRSCHTXT# /* 검색어 */,
    F_MNG_KND_AUDYRNO(D1.ADT_YR, D1.ADT_NO, T1.ADT_KDCD, '-') || '-' || D1.DSPS_RQT_SQNO AS F_MNG_KND_AUDYRNO /* 처분요구번호(관리번호) */,
    CASE WHEN D2.ADT_YR >= '2016' THEN SUBSTR(T1.ADT_KDCD,3,1) ELSE '' END AS ADT_YR /* 감사년도 */,
    F_ORG_INFO(D1.MNG_INST_CD,'1') || '(' || D1.CPS_RBPRSN_NM || ')' AS F_ORG_INFO /* 관리기관(책임자) */,
    D2.DSPS_RQT_NM AS DSPS_RQT_NM /* 처분요구명 */,
    F_DPT_INFO(D1.SPRVSN_DEPT_CD,'1') AS F_DPT_INFO /* 주관국과명 */,
    D1.DSGN_AMT AS DSGN_AMT /* 지정금액 */,
    D1.DMND_YMD AS DMND_YMD /* 요청일자 */,
    D1.DSGN_YMD AS DSGN_YMD /* 지정일자 */,
    D1.RMV_YMD AS RMV_YMD /* 해제일자 */,
    CASE WHEN D1.ATRZ_STTS_SECD IS NULL THEN '미상신' ELSE F_CODE_NM('1000603', D1.ATRZ_STTS_SECD) END AS ATRZ_STTS_SECD /* 결재상태구분코드 */,
    CASE WHEN NVL(D1.CFMTN_YN,'N') != 'Y' AND D1.DSGN_YMD IS NOT NULL AND D1.RMV_YMD IS NULL THEN '지정X' WHEN NVL(D1.CFMTN_YN,'N') = 'Y' AND D1.DSGN_YMD IS NOT NULL AND D1.RMV_YMD IS NULL THEN '지정O' WHEN NVL(D1.CFMTN_YN,'N') != 'Y' AND D1.RMV_YMD IS NOT NULL THEN '해제X' WHEN NVL(D1.CFMTN_YN,'N') = 'Y' AND D1.RMV_YMD IS NOT NULL THEN '해제O' END AS CFMTN_YN /* 확정여부 */
FROM TB_BADFRE011M D1 /* 특수관리기본 */ ,TB_BADEAR001M D2 /* 처분요구사항기본 */ ,TB_BADDED001M T1 WHERE 1=1 AND D1.CVLCPT_ADT_YR = D2.ADT_YR AND D1.ADT_NO = D2.ADT_NO AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO AND D1.CVLCPT_ADT_YR = T1.ADT_YR AND D1.ADT_NO = T1.ADT_NO AND D1.SELF_PRGRS_SECD &gt;= '71' AND NVL(D1.ATRZ_STTS_SECD, '1') = '3' /* 결재완료 상태 */ AND D1.SPRVSN_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDptAuth#, '', #strDptCd#))) AND D1.SPRVSN_DEPT_CD = #SPRVSN_DEPT_CD# AND NVL(D1.CFMTN_YN,'N') != 'Y' AND D1.DSGN_YMD IS NOT NULL AND D1.SRECS_RMV_YMD IS NULL AND NVL(D1.CFMTN_YN,'N') = 'Y' AND D1.DSGN_YMD IS NOT NULL AND D1.SRECS_RMV_YMD IS NULL AND NVL(D1.CFMTN_YN,'N') != 'Y' AND D1.SRECS_RMV_YMD IS NOT NULL AND NVL(D1.CFMTN_YN,'N') = 'Y' AND D1.SRECS_RMV_YMD IS NOT NULL AND ( (SELECT PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = D1.MNG_INST_CD) LIKE '%' || #strSchTxt# || '%' OR D1.CPS_RBPRSN_NM LIKE '%' || #strSchTxt# || '%' OR D2.DSPS_RQT_NM LIKE '%' || #strSchTxt# || '%' ) AND D1.CVLCPT_ADT_YR = #CVLCPT_ADT_YR# AND T1.ADT_GRNT_NO = #ADT_GRNT_NO# /* 감사연번종류코드 - 2015.12.24 yyh */ AND SUBSTR(T1.ADT_KDCD,3,1) = #strAudYrNoKndCd# ORDER BY D1.CVLCPT_ADT_YR DESC , D1.ADT_NO DESC , D1.DSPS_RQT_SQNO DESC , D1.SRECS_REL_INST_CD DESC , D1.MNG_SQNO DESC