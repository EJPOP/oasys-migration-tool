SELECT D1.CRU_KDCD /* 부패종류코드 */,
    F_CODE_NM('1000047', D1.CRU_KDCD) AS F_CODE_NM,
    D1.CVLCPT_RCPT_YR /* 민원접수년도 */,
    D1.CVLCPT_RCPT_RCPT /* 민원접수번호 */,
    D1.CVLCPT_RCPT_YR||'-민원-'||D1.TPOF_ACTL_RCPT_NO AS CVLCPT_RCPT_YR /* 민원접수년도 */,
    D1.RSCH_ASMT_TTL /* 연구과제제목 */,
    F_DPT_INFO(D3.TPOF_PRCS_DEPT_CD, '1') AS PRCS_DEPT_NM /* 처리부서명 */,
    (SELECT S1.USER_NM AS USER_NM /* 사용자명 */
FROM TBDCMACM001M S1 WHERE S1.USER_ID = D3.TPOF_PRCS_PIC_ID) AS USER_NM ,D4.PROF_RBPRSN_INST_NM ,D1.TPOF_CVLPR_NM FROM TB_CSPDCP101M D1 ,TB_CSPDCP102M D2 ,TB_CSPDCP201M D3 ,(SELECT S1.CVLCPT_CLM_SECD /* 민원청구구분코드 */,
    S1.TPOF_RCPT_YR /* 제보접수년도 */,
    S1.TPOF_RCPT_NO /* 제보접수번호 */,
    AGGR_CONCAT( DECODE(S1.TPOF_OCRN_INST_CD,'10',S2.PROF_RBPRSN_INST_NM,'20',S1.TPOF_INST_NM), ',') AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBCSPDCP206L S1 ,TBDCMACM015M S2 WHERE S1.INST_CD = S2.INST_CD(+) AND S1.CLM_SECD = '1' AND S1.CVLCPT_INST_DSCTN_SECD = '1' GROUP BY S1.CLM_SECD, S1.CVLCPT_RCPT_YR, S1.CVLCPT_RCPT_RCPT ) D4 WHERE 1=1 AND D1.CLM_SECD = '1' AND D1.CLM_SECD = D2.CVLCPT_CLM_SECD AND D1.CVLCPT_RCPT_YR = D2.TPOF_RCPT_YR AND D1.CVLCPT_RCPT_RCPT = D2.TPOF_RCPT_NO AND D1.CLM_SECD = D3.CVLCPT_CLM_SECD(+) AND D1.CVLCPT_RCPT_YR = D3.TPOF_RCPT_YR(+) AND D1.CVLCPT_RCPT_RCPT = D3.TPOF_RCPT_NO(+) AND D1.CLM_SECD = D4.CLM_SECD(+) AND D1.CVLCPT_RCPT_YR = D4.CVLCPT_RCPT_YR(+) AND D1.CVLCPT_RCPT_RCPT = D4.CVLCPT_RCPT_RCPT(+) AND D1.RSCH_ASMT_TTL LIKE '%'||#TIT_NM#||'%' AND D2.TPOF_CN LIKE '%'||#TIT_NM#||'%' AND ( D1.CLM_SECD, D1.CVLCPT_RCPT_YR, D1.CVLCPT_RCPT_RCPT ) IN ( SELECT D5.CVLCPT_CLM_SECD /* 민원청구구분코드 */,
    D5.TPOF_RCPT_YR /* 제보접수년도 */,
    D5.TPOF_RCPT_NO /* 제보접수번호 */
FROM TB_CSPDCP206L D5 WHERE D5.CLM_SECD = '1' AND D5.CVLCPT_INST_DSCTN_SECD = '1' AND D5.INST_CD = #INST_CD# ) AND D1.TPOF_CVLPR_NM LIKE #CVPTR_NM#||'%' ORDER BY D1.CVLCPT_RCPT_YR DESC ,D1.TPOF_ACTL_RCPT_NO DESC