SELECT EMPHS_STT_YR || '-' || EMPHS_STT_SQNO AS EMPHS_STT_YR /* 중점법령년도 */,
    F_DPT_INFO(JRSD_DEPT_CD, '1') AS F_DPT_INFO /* 소과부서명 */,
    JRSD_DEPT_CD AS JRSD_DEPT_CD /* 소관부서코드 */,
    ENFC_YMD AS ENFC_YMD /* 시행일자 */,
    F_CODE_NM('1000002', DSPS_RQT_KDCD) AS DSPS_RQT_KND_CVN /* 처분요구종류코드값명 */,
    DSPS_RQT_NM AS DSPS_RQT_NM /* 처분요구명 */,
    F_DPT_INFO(SRECS_REL_INST_CD, '1') AS REL_INST_NM /* 관계기관명 */,
    EMPHS_MNG_STT_NM AS EMPHS_MNG_STT_NM /* 중점관리법령명 */,
    MONI_YN AS MONI_YN /* 모니터링 유무 */,
    EMPHS_STT_YR AS EMPHS_STT_YR /* 중점법령년도 */,
    EMPHS_STT_SQNO AS EMPHS_STT_SQNO /* 중점법령순번 */,
    DSPS_RQT_ADT_YR AS DSPS_RQT_ADT_YR /* 처분요구감사년도 */,
    DSPS_RQT_ADT_SQNO AS DSPS_RQT_ADT_SQNO /* 처분요구감사순번 */,
    DSPS_RQT_DSPS_SQNO AS DSPS_RQT_DSPS_SQNO /* 처분요구처분순번 */,
    DSPS_RQT_KDCD AS DSPS_RQT_KDCD /* 처분요구종류코드 */,
    DSPS_RQT_ACTN_MTTR_CN AS DSPS_RQT_ACTN_MTTR_CN /* 처분요구조치사항내용 */,
    CVLCPT_DOC_ID AS CVLCPT_DOC_ID /* 민원문서아이디 */,
    NVL(CPLT_YN, 'N') AS CPLT_YN /* 완결여부 */
FROM ( SELECT D4.EMPHS_STT_YR /* 중점법령년도 */,
    D4.EMPHS_STT_SQNO /* 중점법령순번 */,
    D4.DSPS_RQT_ADT_YR /* 처분요구감사년도 */,
    D4.DSPS_RQT_ADT_SQNO /* 처분요구감사순번 */,
    D4.DSPS_RQT_DSPS_SQNO /* 처분요구처분순번 */,
    D4.JRSD_DEPT_CD /* 소관부서코드 */,
    D2.ENFC_YMD /* 시행일자 */,
    D1.DSPS_RQT_KDCD /* 처분요구종류코드 */,
    D1.DSPS_RQT_NM /* 처분요구명 */,
    D2.REL_INST_CD /* 관계기관코드 */,
    D4.EMPHS_MNG_STT_NM /* 중점관리법령명 */,
    CASE WHEN ( SELECT COUNT(STT_YR) AS STT_YR /* 법령년도 */
FROM TBBADCMR011M WHERE REL_EMPHS_MNG_STT_YR = D4.EMPHS_STT_YR AND REL_EMPHS_MNG_STT_SQNO = D4.EMPHS_STT_SQNO ) > 0 THEN 'Y' ELSE 'N' END MONI_YN , D3.DSPS_RQT_ACTN_MTTR_CN /*처분요구조치사항*/ , D4.CVLCPT_DOC_ID /*문서ID*/ , D4.CPLT_YN FROM TBBADCMR014M D4 /*중점관리법형기본*/ , TBBADEAR001M D1 /*처분요구사항기본*/ , TBBADEAR002D D2 /*처분요구사항상세*/ , TBBADEAR005M D3 /*처분요구요약전기본*/ WHERE 1=1 AND D4.DSPS_RQT_ADT_YR = D1.CVLCPT_ADT_YR (+) AND D4.DSPS_RQT_ADT_SQNO = D1.ADT_NO (+) AND D4.DSPS_RQT_DSPS_SQNO = D1.DSPS_RQT_SQNO (+) AND D1.CVLCPT_ADT_YR = D2.CVLCPT_ADT_YR (+) AND D1.ADT_NO = D2.ADT_NO (+) AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO (+) AND D2.CVLCPT_ADT_YR = D3.CVLCPT_ADT_YR (+) AND D2.ADT_NO = D3.ADT_NO (+) AND D2.DSPS_RQT_SQNO = D3.DSPS_RQT_SQNO (+) AND D4.JRSD_DEPT_CD LIKE SUBSTR(#JRSD_DEPT_CD#,0 ,2) || '%' AND D4.JRSD_DEPT_CD = #JRSD_DEPT_CD# AND D4.JRSD_DEPT_CD = #JRSD_DEPT_CD# AND D2.ENFC_YMD >= #strFromEnfDt# AND D2.ENFC_YMD AND D4.JRSD_DEPT_CD LIKE ( CASE WHEN SUBSTR(#stsrCoptDptCd#, 4) = '01' THEN SUBSTR(#stsrCoptDptCd#,0, 2) WHEN SUBSTR(#stsrCoptDptCd#, 4) = '00' THEN SUBSTR(#stsrCoptDptCd#,0, 2) ELSE #stsrCoptDptCd# END ) || '%' AND D1.DSPS_RQT_KDCD = #DSPS_RQT_KDCD# /*처분종류*/ AND D2.SRECS_REL_INST_CD = #SRECS_REL_INST_CD# /*관계기관검색*/ AND ( UPPER(D1.DSPS_RQT_NM) LIKE '%' || UPPER(#strLawNm#) || '%' OR UPPER(D4.EMPHS_MNG_STT_NM) LIKE '%' || UPPER(#strLawNm#) || '%' ) ) WHERE 1 = 1 AND NVL(MONI_YN, 'N') = #strMoniYn# AND NVL(CPLT_YN, 'N') = #strCpltYn# ORDER BY EMPHS_STT_YR DESC, EMPHS_STT_SQNO DESC