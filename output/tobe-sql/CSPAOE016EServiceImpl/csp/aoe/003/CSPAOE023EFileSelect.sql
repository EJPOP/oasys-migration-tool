SELECT T1.ADT_YR /* 감사년도 */,
    T1.ADT_NO /* 감사번호 */,
    T1.ADT_STP_SECD /* 감사단계구분코드 */,
    T1.CVLCPT_DOC_ID /* 문서아이디 */,
    T2.ADT_DOC_SECD /* 감사문서구분코드 */,
    T1.ADT_KDCD /* 감사종류코드 */,
    T1.ADT_GRNT_NO /* 감사부여번호 */,
    NVL(T1.RPTP_NM,T2.DTL_ADT_DOC_NM) AS SLCT_RPTP_NM /* 청탁보고서명 */,
    NVL(T1.RPTP_NM,T2.DTL_ADT_DOC_NM) AS RPTP_NM /* 보고서명 */,
    NVL(F_CODE_NM('1000773',ATRZ_STTS_SECD),'미작성') AS F_CODE_NM,
    ATRZ_STTS_SECD /* 결재상태구분코드 */,
    SLCT_RPTP_KDCD /* 청탁보고서종류코드 */,
    CASE WHEN ATRZ_STTS_SECD = '30' THEN F_CODE_NM('1000773',ATRZ_STTS_SECD)||'('|| (SELECT AS ATRZ_STTS_SECD /* 결재상태구분코드 */
FROM ( SELECT TO_CHAR(ST1.APV_DH,'YYYY-MM-DD') AS TO_CHAR,
    ATRZ_DOC_NO /* 결재문서번호 */
FROM TBDCMACM023L ST1 WHERE ST1.APRVR_KDCD = '3' ORDER BY ST1.APV_SNO DESC) WHERE ROWNUM = 1 AND ATRZ_DOC_NO = T1.ATRZ_DMND_ID) ||')' WHEN ATRZ_STTS_SECD IS NULL THEN '미작성' ELSE F_CODE_NM('1000773',ATRZ_STTS_SECD)||'('||TO_CHAR(T1.LAST_MDFCN_DT,'YYYY-MM-DD')||')' END AS RPRT_STAT_CD ,F_MNG_KND_AUDYRNO(CVLCPT_ADT_YR, ADT_NO, ADT_KDCD, '-') AS ADT_CLSF_NO FROM TB_BADDED103M T1 ,TB_FDMADM002M T2 WHERE T1.SLCT_RPTP_KDCD = T2.ADT_DOC_SECD AND (T1.SLCT_RPTP_KDCD IN ('A10200100','A10300100','A10500200','A10500210','A10800100') OR (T2.ADT_DOC_SECD = 'A10600200' AND T2.ADT_RPTP_TPCD = SUBSTR(ADT_KDCD,-1))) AND T1.CVLCPT_ADT_YR =#CVLCPT_ADT_YR# AND T1.ADT_NO = #ADT_NO#