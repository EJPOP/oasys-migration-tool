SELECT ADT_MTTR_NM /* 감사사항명 */,
    F_DPT_INFO(SPRVSN_DEPT_CD,'1') AS F_DPT_INFO /* 주관부서 */,
    CASE WHEN trim(A.ENFC_ATRZ_YMD) IS NOT NULL THEN '시행' WHEN trim(A.LDRV_MBCMT_ATRZ_YMD) IS NOT NULL THEN '검토(주심위원)' WHEN trim(A.OW_DHD_ATRZ_YMD) IS NOT NULL THEN '검토(총*차장)' WHEN trim(A.JDAF_SRNG_OFER_ATRZ_YMD) IS NOT NULL THEN '검토(심의실장)' WHEN trim(A.AJMT_DDG_ATRZ_YMD) IS NOT NULL THEN '검토(조정담당관)' WHEN trim(A.AJMT_OFER_ATRZ_YMD) IS NOT NULL THEN '검토(조정담당자)' WHEN trim(A.AB_ATRZ_YMD) IS NOT NULL THEN '검토(감사국과)' WHEN trim(A.DAG_RPT_YMD) IS NOT NULL THEN '검토(귀청보고)' ELSE '실지감사중' END AS TRIM /* 현처리단계 */,
    CASE WHEN trim(A.ENFC_ATRZ_YMD) IS NOT NULL THEN '-' /* 시행결재일자가 있으면 지연일수 없음*/ WHEN trim(A.LDRV_MBCMT_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.ENFC_ATRZ_TERM_YMD)) WHEN trim(A.OW_DHD_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.LDRV_MBCMT_ATRZ_TERM_YMD)) WHEN trim(A.JDAF_SRNG_OFER_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.PSD_DHD_ATRZ_TERM_YMD)) WHEN trim(A.AJMT_DDG_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.DLRM_ATRZ_TERM_YMD)) WHEN trim(A.AJMT_OFER_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.AJMT_OFER_ATRZ_TERM_YMD)) WHEN trim(A.AB_ATRZ_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.AJMT_PIC_ATRZ_TERM_YMD)) WHEN trim(A.DAG_RPT_YMD) IS NOT NULL THEN to_char(to_date(sysdate)-to_date(A.RB_PRCS_TERM_YMD)) WHEN trim(A.DAG_RPT_YMD) IS NULL THEN to_char(to_date(sysdate)-to_date(A.RPT_TERM_YMD)) ELSE '-' END AS TRIM /* 지연일수 */,
    A.PRCS_PRST_DSCTN /* 처리현황내역 */
FROM TB_BADDED003M A ,TB_BADDED001M B WHERE 1=1 AND A.ADT_YR(+) = B.ADT_YR AND A.ADT_NO(+) = B.ADT_NO AND ((A.ACADT_PRCS_STTS_SECD = '1' AND TO_DATE(NVL(A.DAG_YMD ,'99991231')) - TO_DATE(SYSDATE) <= 0) AND SUBSTRING(B.SPRVSN_DEPT_CD, 1, 1) = '0' OR A.ACADT_PRCS_STTS_SECD = '3') AND SUBSTRB(SPRVSN_DEPT_CD, 1, 3) || '000' = #strDptCd# /*화면의 부서국코드*/