SELECT D1.ADT_YR AS ADT_YR /* 감사년도 */,
    D1.ADT_NO AS ADT_NO /* 감사번호 */,
    F_MNG_KND_AUDYRNO(D4.ADT_YR, D4.ADT_NO, D4.ADT_KDCD, '-') AS ADT_CLSF_NO /* 감사분류번호 */,
    D1.DSPS_RQT_SQNO AS DSPS_RQT_SQNO /* 처분요구순번 */,
    F_MNG_KND_AUDYRNO(D4.ADT_YR, D4.ADT_NO, D4.ADT_KDCD, '-') ||'-'|| D1.DSPS_RQT_SQNO AS ADT_DSPS_RQT_SQNO /* 감사처분요구순번 */,
    D3.ADT_MTTR_NM AS ADT_MTTR_NM /* 감사사항명 */,
    D1.DSPS_RQT_NM AS DSPS_RQT_NM /* 처분요구명 */,
    D4.SPRVSN_DEPT_CD AS SPRVSN_DEPT_CD /* 주관부서코드 */,
    F_DPT_INFO(D4.SPRVSN_DEPT_CD,'1') AS F_DPT_INFO /* 주관국과명 */,
    F_CODE_NM('1000002',D1.DSPS_RQT_KDCD ) AS DSPS_RQT_KND_CVN /* 처분요구종류코드값명 */,
    D3.HMPG_RLS_YN /* 누리집공개여부 */,
    D3.SRECS_REL_INST_CD /* 심사재심의관계기관코드 */,
    D3.REL_INST_NM /* 관계기관명 */,
    F_CODE_NM('1000120',D2.TASK_SECD) AS F_CODE_NM /* 업무분류명 */,
    D3.RLS_TTL_CN /* 공개제목내용 */,
    D3.RLS_CN /* 공개내용 */,
    D3.RPRS_INST_CD /* 대표기관코드 */,
    CASE WHEN D2.CFMTN_STTS_SECD = '1' THEN '처분확정' WHEN D2.CFMTN_STTS_SECD = '2' THEN '집행확정' ELSE '미확정' END AS CFMTN_STTS_SECD /* 확정상태구분코드 */,
    NVL(D2.CFMTN_STTS_SECD,0) AS CFMTN_STTS_SECD /* 확정상태구분코드 */,
    TO_CHAR(D3.LAST_MDFCN_DT, 'YYYY-MM-DD HH24:MI') AS TO_CHAR,
    D3.CVLCPT_DOC_ID /* 민원문서아이디 */,
    CASE WHEN D3.CVLCPT_DOC_ID IS NULL AND CSD_TRSF_SCS_YN IS NULL THEN '공개문 미생성' WHEN D3.CVLCPT_DOC_ID IS NULL AND CSD_TRSF_SCS_YN = 'Z' THEN '공개문 미존재' WHEN D3.CVLCPT_DOC_ID IS NOT NULL AND CSD_TRSF_SCS_YN IS NULL THEN '공개문 생성중' WHEN D3.CVLCPT_DOC_ID IS NOT NULL AND CSD_TRSF_SCS_YN = 'Y' THEN '공개문 생성 성공' WHEN D3.CVLCPT_DOC_ID IS NOT NULL AND CSD_TRSF_SCS_YN = 'N' THEN '공개문 생성 실패' ELSE '' END AS CVLCPT_DOC_ID /* 민원문서아이디 */,
    NVL(D3.CSD_TRSF_SCS_YN,'Z') AS CSD_TRSF_SCS_YN /* CSD변환성공여부 */
FROM TB_BADEAR001M D1 /*처분요구사항기본*/ ,TB_BADEAR002D D2 /*처분요구사항상세*/ ,TBBADEAR030M_UPLOAD D3 /*홍보제출기본*/ ,TB_BADDED001M D4 /*감사사항기본*/ WHERE D4.ADT_YR = D1.ADT_YR AND D4.ADT_NO = D1.ADT_NO AND D1.ADT_YR = D2.ADT_YR AND D1.ADT_NO = D2.ADT_NO AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO AND D1.ADT_YR = D3.CVLCPT_ADT_YR AND D1.ADT_NO = D3.ADT_NO AND D1.DSPS_RQT_SQNO = D3.DSPS_RQT_SQNO AND D1.ADT_YR = #CVLCPT_ADT_YR# AND D1.ADT_NO between #strAudNo# and #strAudNo2# ORDER BY D1.ADT_YR, D1.ADT_NO ,D1.DSPS_RQT_SQNO