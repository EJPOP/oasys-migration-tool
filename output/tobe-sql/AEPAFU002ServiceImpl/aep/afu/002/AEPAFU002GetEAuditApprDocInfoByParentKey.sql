SELECT C.ADT_STP_SECD /* 감사단계구분코드 */,
    B.ADT_STP_NM /* 감사단계명 */,
    A.SLCT_RPTP_NM /* 청탁보고서명 */,
    A.SLCT_RPTP_KDCD /* 청탁보고서종류코드 */,
    C.ATRZ_DMND_ID /* 결재요청아이디 */,
    C.ADT_YR /* 감사년도 */,
    C.ADT_NO /* 감사번호 */,
    C.DOC_ID /* 문서아이디 */,
    C.ATRZ_STTS_SECD /* 결재상태구분코드 */,
    F_OPEN_EDIT(C.LNKG_URL_ADDR) AS F_OPEN_EDIT
FROM (SELECT AA.ADT_YR /* 감사년도 */,
    AA.ADT_NO /* 감사번호 */,
    AA.ADT_STP_SECD /* 감사단계구분코드 */,
    AA.CVLCPT_DOC_ID /* 문서아이디 */,
    AA.RPTP_KDCD /* 보고서종류코드 */,
    AA.RPTP_NM /* 보고서명 */,
    AA.LNKG_URL_ADDR /* 연결URL주소 */
FROM TBBADDED103M AA UNION ALL SELECT BB.ADT_YR /* 감사년도 */,
    BB.ADT_NO /* 감사번호 */,
    'NO',
    BB.CVLCPT_DOC_ID /* 문서아이디 */,
    DECODE(BB.DOC_TPCD,'AD-AR-002','A10300100','AD-AR-003','A10600200','AD-AR-001','A10500200') AS SLCT_RPTP_KDCD /* 청탁보고서종류코드 */,
    CC.ENAIS_ATCH_FILE_NM AS ENAIS_ATCH_FILE_NM /* ENAIS첨부파일명 */,
    'hancom' AS DOC_TYPE
FROM TBBADDED021M BB INNER JOIN ECM_FILE_LIST_VIEW2 CC ON CC.CVLCPT_DOC_ID = BB.CVLCPT_DOC_ID ) A LEFT OUTER JOIN TB_BADDED101M B ON A.CVLCPT_ADT_YR = B.ADT_YR AND A.ADT_NO = B.ADT_NO AND A.ADT_STP_SECD = B.ADT_STP_SECD INNER JOIN TB_AEPMAR001M C ON A.CVLCPT_ADT_YR = C.ADT_YR AND A.ADT_NO = C.ADT_NO AND A.ADT_STP_SECD = C.ADT_STP_SECD AND A.CVLCPT_DOC_ID = C.RFRNC_DOC_ID WHERE 1=1 AND C.ATRZ_DMND_ID IS NULL (#docInfoList[].audYr#,#docInfoList[].audNo#,#docInfoList[].audStepCd#,#docInfoList[].docId#)