SELECT E.ABR_DPT_NM_2,
    /* 20181104 EUNOK C.CD_NM -> E.ABR_DPT_NM_2 */ A.TRGT_NOP_ENO AS TRGT_NOP_ENO /* 대상인원직원전산번호 */,
    B.USER_NM /* 사용자명 */,
    B.USER_NM || '(' || A.TRGT_NOP_ENO || ')' AS USER_NM /* 사용자명 */,
    MONTH1,
    MONTH2,
    MONTH3,
    MONTH4,
    MONTH5,
    MONTH6,
    MONTH7,
    MONTH8,
    MONTH9,
    MONTH10,
    MONTH11,
    MONTH12,
    (MONTH1+MONTH2+MONTH3+MONTH4+MONTH5+MONTH6+ MONTH7+MONTH8+MONTH9+MONTH10+MONTH11+MONTH12) AS MONTH1,
    #yyyy# AS #YYYY#
FROM ( SELECT TRGT_NOP_ENO /* 대상인원직원전산번호 */,
    SRECS_DEPT_CD /* 심사재심의부서코드 */,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'01' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'02' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'03' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'04' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'05' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'06' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'07' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'08' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'09' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'10' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'11' THEN PMT_AM END),0) AS PMT_YM,
    NVL(SUM(CASE WHEN PMT_YM = #yyyy# ||'12' THEN PMT_AM END),0) AS PMT_YM
FROM TBCSPLFI104L WHERE ALW_DVSN_CD = #AlwDvsnCd# GROUP BY TRGT_NOP_ENO ,SRECS_DEPT_CD ) A, TBDCMACM001M B, TBDCMACM013C C, TBDCMACM002M E WHERE A.TRGT_NOP_ENO = B.TRGT_NOP_ENO AND B.USER_NM LIKE '%' || #name# ||'%' AND CMM_CD_DVSN_CD = '1000144' AND A.SRECS_DEPT_CD = C.CD AND A.SRECS_DEPT_CD = E.SRECS_DEPT_CD ORDER BY E.DPT_SNO ASC, E.CRU_SORT_SQNO ASC, A.SRECS_DEPT_CD ASC, B.INSD_JBGD_SECD ASC, B. NOW_JBGD_APNTMN_YMD ASC