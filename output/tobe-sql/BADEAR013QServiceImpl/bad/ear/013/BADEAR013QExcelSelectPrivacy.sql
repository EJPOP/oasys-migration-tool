SELECT F_MNG_KND_AUDYRNO(MASTER.CVLCPT_ADT_YR, MASTER.ADT_NO, AUD.ADT_KDCD, '-') AS F_MNG_KND_AUDYRNO,
    F_MNG_KND_AUDYRNO(MASTER.CVLCPT_ADT_YR, MASTER.ADT_NO, AUD.ADT_KDCD, '-') ||'-'|| MASTER.DSPS_RQT_SQNO AS DSPS_RQT_SQNO /* 처분요구순번 */,
    DETAIL.ENFC_YMD AS ENFC_YMD /* 시행일자 */,
    DETAIL.PRCS_TERM_YMD AS PRCS_TERM_YMD /* 처리기한일자 */,
    (SELECT MIN(ADT_BGNG_YMD) AS ADT_BGNG_YMD /* 감사시작일자 */
FROM TB_BADDED002M WHERE REL_ADT_YR = MASTER.CVLCPT_ADT_YR AND REL_ADT_NO = MASTER.ADT_NO ) AS ADT_BGNG_YMD , F_CODE_NM_YEAR('1000007',AUD.ADT_KDCD,MASTER.CVLCPT_ADT_YR) AS AUD_KND_NM /*감사종류*/ , AUD.ADT_MTTR_NM AS ADT_MTTR_NM /*감사사항*/ , AUD.SPRVSN_DEPT_CD AS SPRVSN_DEPT_CD /*주관부서코드*/ , (SELECT CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */
FROM TBDCMACM002M WHERE SRECS_DEPT_CD = AUD.SPRVSN_DEPT_CD) AS SPV_BRDV_NM /*주관부서명*/ , MASTER.DSPS_RQT_KDCD AS DSPS_RQT_KDCD /*처분종류코드*/ , (SELECT CD_NM
FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000002' AND CD = MASTER.DSPS_RQT_KDCD) AS DSPS_RQT_KND_CVN /*처분종류*/ , MASTER.DSPS_RQT_NM AS DISP_TIT_TXT /*처분요구제목*/ , COPT.CMO_INST_CD AS CMO_INST_CD /*1차기관코드*/ , (SELECT PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = COPT.CMO_INST_CD) AS COPT_OFI_NM /*1차기관*/ , REL.SRECS_REL_INST_CD AS SRECS_REL_INST_CD /*소관기관코드*/ , (SELECT PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = REL.SRECS_REL_INST_CD) AS REL_INST_NM /*소관기관*/ , REL.IMPL_MNG_INST_CD AS IMPL_MNG_INST_CD /*조치기관코드*/ , (SELECT PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = REL.IMPL_MNG_INST_CD) AS ENFM_MNG_ORG_NM /*조치기관*/ , REL.ENFM_MNG_ORG_CNT AS ENFM_MNG_ORG_CNT /*집행기관수*/ , (SELECT CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */
FROM TBDCMACM002M WHERE SRECS_DEPT_CD = DETAIL.IMPL_MNG_JRSD_DEPT_CD) AS ENFM_MNG_BRDV_NM /*이행국과*/ , DETAIL.ENFC_DEPT_CD AS ENFC_DEPT_CD /*시행부서코드*/ , (SELECT CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */
FROM TBDCMACM002M WHERE SRECS_DEPT_CD = DETAIL.ENFC_DEPT_CD) AS ENF_BRDV_NM /*시행부서*/ , DETAIL.DOC_SNDNG_NO AS DOC_SNDNG_NO /*시행문번호*/ , DETAIL.TPOF_NOPE AS TPOF_NOPE /*인원*/ , NVL(DETAIL.PNRT_PRSRV_AMT,0) + NVL(DETAIL.RMBR_AMT,0) + NVL(DETAIL.SPLP_AMT,0) AS DISP_REQ_AM /*금액*/ , CASE WHEN DETAIL.SDIN_STTS_SECD = '3' THEN DECODE(DETAIL.CFMTN_STTS_SECD, 0, '미확정', '확정') ELSE '미송부' END AS DTM_STA_NM1 /*처분상태변경 - 2018.02.23 yyh*/ , CASE WHEN NVL(DETAIL.CFMTN_STTS_SECD,'0') = '1' AND NVL(DETAIL.CFMTN_YN,'0') != 'Y' THEN '미결' WHEN NVL(DETAIL.CFMTN_STTS_SECD,'0') = '1' AND NVL(DETAIL.CFMTN_YN,'0') = 'Y' THEN '완결' WHEN NVL(DETAIL.CFMTN_STTS_SECD,'0') = '2' THEN '확정' END AS DTM_STA_NM2 /*집행*/ , DETAIL.VIOL_TPCD AS VIOL_TPCD /*비위유형*/ , (SELECT CD_NM
FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000121' AND CD = DETAIL.VIOL_TPCD) AS VIOL_TYPE_NM /*비위유형*/ , DETAIL.VIOL_CS_SECD AS VIOL_CS_SECD /*비위원인*/ , (SELECT CD_NM
FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000006' AND CD = DETAIL.VIOL_CS_SECD) AS WRDO_CAU_NM /*비위원인*/ , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| ACNTG_YR ||'-'|| F_CODE_NM('1000004',DSPS_RQT_ACNTG_SECD) || '(' || DSPS_RQT_ACNTG_SECD || ')') ORDER BY ACNTG_MTTR_SQNO), '//text()'), 3) AS ACNTG_YR /* 회계년도 */
FROM TB_BADEAR003M WHERE CVLCPT_ADT_YR = DETAIL.CVLCPT_ADT_YR AND ADT_NO = DETAIL.ADT_NO AND DSPS_RQT_SQNO = DETAIL.DSPS_RQT_SQNO GROUP BY CVLCPT_ADT_YR, ADT_NO, DSPS_RQT_SQNO) AS ACNT_SBJ_NM /*회계사항명*/ , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A,', '|| (SELECT X.USER_NM AS USER_NM /* 사용자명 */
FROM TBDCMACM001M X WHERE X.TRGT_NOP_ENO = EXTT_ID) ||'('||EXTT_ID||')' ) ORDER BY EXTT_ID), '//text()'),3) FROM TB_BADEAR004M WHERE CVLCPT_ADT_YR = DETAIL.CVLCPT_ADT_YR AND ADT_NO = DETAIL.ADT_NO AND DSPS_RQT_SQNO = DETAIL.DSPS_RQT_SQNO GROUP BY CVLCPT_ADT_YR ,ADT_NO ,DSPS_RQT_SQNO) AS EXTT_ID /*적출자*/ , NVL(DETAIL.PNRT_PRSRV_AMT,0) AS PNRT_PRSRV_AMT /*추징회수보전금액*/ , NVL(DETAIL.RMBR_AMT,0) + NVL(DETAIL.SPLP_AMT,0) AS RSR_AM_PLUS_SPLP_AM /*환추급금액*/ , NVL(DETAIL.RMBR_AMT,0) AS RMBR_AMT /*환급금액*/ , NVL(DETAIL.SPLP_AMT,0) AS SPLP_AMT /*추급금액*/ , NVL(DETAIL.BGT_RTRC_AMT,0) + NVL(DETAIL.INCM_INCRS_AMT,0) + NVL(DETAIL.PPL_BRDN_RDT_AMT,0) + NVL(DETAIL.PRPT_INCRS_AMT,0) + NVL(DETAIL.EXPND_RATI_AMT,0) AS EFT_AMT /*기대효과금액*/ , NVL(DETAIL.BGT_RTRC_AMT,0) AS BGT_RTRC_AMT /*예산절감금액*/ , NVL(DETAIL.INCM_INCRS_AMT,0) AS INCM_INCRS_AMT /*수입증대금액*/ , NVL(DETAIL.PPL_BRDN_RDT_AMT,0) AS PPL_BRDN_RDT_AMT /*국민부담경감금액*/ , NVL(DETAIL.PRPT_INCRS_AMT,0) AS PRPT_INCRS_AMT /*재산증가금액*/ , NVL(DETAIL.EXPND_RATI_AMT,0) AS EXPND_RATI_AMT /*지출합리화금액*/ , NVL(DETAIL.EPFC_EFCT_AMT,0) AS EPFC_EFCT_AMT /*사후적금액*/ , DETAIL.CPLT_YMD AS CPLT_YMD /*완결일 */ , DETAIL.IMPL_WHLS_CFMTN_YMD AS IMPL_WHLS_CFMTN_YMD /*완결확정일*/ , MASTER.INST_SECD AS INST_SECD /*기관구분코드*/ , (SELECT CD_NM
FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000119' AND CD = MASTER.INST_SECD) AS ORG_DVSN_NM /*기관구분*/ , DETAIL.ACSTN_RQST_NOP_CONT AS ACSTN_RQST_NOP_CONT /*별도고발인원*/ , (SELECT CASE WHEN COUNT(DISTINCT INST_CD)>1 THEN F_ORG_INFO(MIN(INST_CD),'1')||'외 '||TO_CHAR(COUNT(DISTINCT INST_CD)-1)||'' ELSE F_ORG_INFO(MIN(INST_CD),'1') AS INST_CD /* 기관코드 */
FROM TB_BADDED008L WHERE 1 = 1 AND (BZTRP_YR, BZTRP_SQNO) IN (SELECT BZTRP_YR /* 출장년도 */,
    BZTRP_SQNO /* 출장순번 */
FROM TB_BADDED002M WHERE 1=1 AND REL_ADT_YR = MASTER.CVLCPT_ADT_YR AND REL_ADT_NO = MASTER.ADT_NO )) AS AUD_TRGT_ORG /*감사대상기관*/ , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = SRECS_REL_INST_CD) ) ORDER BY SRECS_REL_INST_CD), '//text()'), 3) FROM TB_BADEAR006M WHERE CVLCPT_ADT_YR = DETAIL.CVLCPT_ADT_YR AND ADT_NO = DETAIL.ADT_NO AND DSPS_RQT_SQNO = DETAIL.DSPS_RQT_SQNO GROUP BY CVLCPT_ADT_YR , ADT_NO , DSPS_RQT_SQNO) AS RLTN_ORG_NMS , (SELECT SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| (SELECT AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = IMPL_MNG_INST_CD) ) ORDER BY SRECS_REL_INST_CD), '//text()'), 3) FROM TB_BADEAR006M WHERE CVLCPT_ADT_YR = DETAIL.CVLCPT_ADT_YR AND ADT_NO = DETAIL.ADT_NO AND DSPS_RQT_SQNO = DETAIL.DSPS_RQT_SQNO GROUP BY CVLCPT_ADT_YR , ADT_NO , DSPS_RQT_SQNO) AS ENFM_MNG_ORG_NMS , DECODE(NVL(#strPrivacy#,'N'),'Y', (SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| RLPR_NM || MAX('(' || F_CODE_NM('1000011', D1.ACTN_RQT_KDCD) || '>' || F_CODE_NM('1000003', D2.IMPL_TPCD) || ')') ) ORDER BY RLPR_NM), '//text()').getClobVal(), 3) , '&gt;' , '>' ) AS ACTN_RQT_KDCD /* 조치요구종류코드 */
FROM TB_BADEAR007M D1 , (SELECT S1.ADT_YR /* 감사년도 */,
    S1.ADT_NO /* 감사번호 */,
    S1.DSPS_RQT_SQNO /* 처분요구순번 */,
    S1.REL_INST_CD /* 관계기관코드 */,
    S1.RLPR_SQNO /* 관계자순번 */,
    S1.IMPL_SQNO /* 집행순번 */,
    S1.IMPL_TPCD /* 집행유형코드 */
FROM TBBADFRE008M S1 WHERE S1.IMPL_SQNO = (SELECT MAX(IMPL_SQNO) AS IMPL_SQNO /* 집행순번 */
FROM TBBADFRE008M WHERE CVLCPT_ADT_YR = S1.CVLCPT_ADT_YR AND ADT_NO = S1.ADT_NO AND DSPS_RQT_SQNO = S1.DSPS_RQT_SQNO AND SRECS_REL_INST_CD = S1.SRECS_REL_INST_CD AND RLPR_SQNO = S1.RLPR_SQNO) ) D2 WHERE 1=1 AND D1.CVLCPT_ADT_YR = D2.CVLCPT_ADT_YR(+) AND D1.ADT_NO = D2.ADT_NO(+) AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO(+) AND D1.SRECS_REL_INST_CD = D2.SRECS_REL_INST_CD(+) AND D1.RLPR_SQNO = D2.RLPR_SQNO(+) AND D1.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND D1.ADT_NO = MASTER.ADT_NO AND D1.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO GROUP BY RLPR_NM), NVL2((SELECT REPLACE( SUBSTR(EXTRACT(XMLAGG(XMLELEMENT(A, ', '|| RLPR_NM || MAX('(' || F_CODE_NM('1000011', D1.ACTN_RQT_KDCD) || '>' || F_CODE_NM('1000003', D2.IMPL_TPCD) || ')') ) ORDER BY RLPR_NM), '//text()').getClobVal(), 3) , '&gt;' , '>' ) AS ACTN_RQT_KDCD /* 조치요구종류코드 */
FROM TB_BADEAR007M D1 , (SELECT S1.ADT_YR /* 감사년도 */,
    S1.ADT_NO /* 감사번호 */,
    S1.DSPS_RQT_SQNO /* 처분요구순번 */,
    S1.REL_INST_CD /* 관계기관코드 */,
    S1.RLPR_SQNO /* 관계자순번 */,
    S1.IMPL_SQNO /* 집행순번 */,
    S1.IMPL_TPCD /* 집행유형코드 */
FROM TBBADFRE008M S1 WHERE S1.IMPL_SQNO = (SELECT MAX(IMPL_SQNO) AS IMPL_SQNO /* 집행순번 */
FROM TBBADFRE008M WHERE CVLCPT_ADT_YR = S1.CVLCPT_ADT_YR AND ADT_NO = S1.ADT_NO AND DSPS_RQT_SQNO = S1.DSPS_RQT_SQNO AND SRECS_REL_INST_CD = S1.SRECS_REL_INST_CD AND RLPR_SQNO = S1.RLPR_SQNO) ) D2 WHERE 1=1 AND D1.CVLCPT_ADT_YR = D2.CVLCPT_ADT_YR(+) AND D1.ADT_NO = D2.ADT_NO(+) AND D1.DSPS_RQT_SQNO = D2.DSPS_RQT_SQNO(+) AND D1.SRECS_REL_INST_CD = D2.SRECS_REL_INST_CD(+) AND D1.RLPR_SQNO = D2.RLPR_SQNO(+) AND D1.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND D1.ADT_NO = MASTER.ADT_NO AND D1.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO GROUP BY RLPR_NM),'OOO','')) AS DFNT_NMS , F_CODE_NM('1000918', DETAIL.EXRS_RVW_SECD) AS IMMUN_EXAM_NM /*통계자료 입력 적극행정면책 검토명*/ , F_CODE_NM('1000919', DETAIL.EXRS_YN_SECD) AS IMMUN_EXAM_NM2 /*통계자료 입력 면책여부명*/ , NVL(DETAIL.PASV_PBADMS_RVW_CN_YN, 'N') AS PASV_PBADMS_RVW_CN_YN /*소극행정검토내용*/ , NVL(DETAIL.SELF_YN, 'N') AS SELF_YN /*자율여부*/ , NVL(DETAIL.HMPG_RLS_YN, 'N') AS HMPG_RLS_YN /*홈페이지공개여부*/ ,(SELECT F_CODE_NM('1000774',T1.SBCN_SECD) AS SBCN_SECD /* 부의구분코드 */
FROM TB_BADDED145M T1 INNER JOIN TB_BADDED146M T2 ON T1.CVLCPT_ADT_YR = T2.CVLCPT_ADT_YR AND T1.ADT_NO = T2.ADT_NO AND T1.ADT_STP_SECD = T2.ADT_STP_SECD AND T1.APRVR_JBPS_SECD = T2.APRVR_JBPS_SECD AND T1.CVLCPT_DOC_ID = T2.CVLCPT_DOC_ID AND T1.INCDNT_SQNO = T2.INCDNT_SQNO AND T1.ADT_STP_SECD = 'A1070' AND T1.CVLCPT_ADT_YR > '2017' AND T1.APRVR_JBPS_SECD = 'A1070' WHERE T1.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND T1.ADT_NO = MASTER.ADT_NO AND T2.DSPS_RQT_SQNO = MASTER.ADT_DSPS_RQT_SQNO) AS REFER_DVSN_NM /* 부의 위임여부 - 2021.01.03 EUNOK */ FROM TB_BADEAR001M MASTER ,TB_BADEAR002D DETAIL ,TB_BADDED001M AUD ,TB_BADEAR035L DVSN /* 추가 2016.05.03 yyh */ ,( SELECT CVLCPT_ADT_YR /* 민원감사년도 */,
    ADT_NO /* 감사번호 */,
    DSPS_RQT_SQNO /* 처분요구순번 */,
    MIN(SRECS_REL_INST_CD) AS SRECS_REL_INST_CD /* 심사재심의관계기관코드 */,
    MIN(IMPL_MNG_INST_CD) AS IMPL_MNG_INST_CD /* 집행관리기관코드 */,
    COUNT(IMPL_MNG_INST_CD) AS IMPL_MNG_INST_CD /* 집행관리기관코드 */
FROM TBBADEAR006M WHERE 1=1 GROUP BY CVLCPT_ADT_YR ,ADT_NO ,DSPS_RQT_SQNO ) REL ,( SELECT CVLCPT_ADT_YR /* 민원감사년도 */,
    ADT_NO /* 감사번호 */,
    DSPS_RQT_SQNO /* 처분요구순번 */,
    MIN(SRECS_REL_INST_CD) AS CMO_INST_CD /* 소관청기관코드 */
FROM TBBADEAR008M WHERE 1=1 GROUP BY CVLCPT_ADT_YR ,ADT_NO ,DSPS_RQT_SQNO ) COPT WHERE 1=1 AND MASTER.CVLCPT_ADT_YR = DETAIL.CVLCPT_ADT_YR AND MASTER.ADT_NO = DETAIL.ADT_NO AND MASTER.DSPS_RQT_SQNO = DETAIL.DSPS_RQT_SQNO AND MASTER.CVLCPT_ADT_YR = AUD.CVLCPT_ADT_YR AND MASTER.ADT_NO = AUD.ADT_NO AND MASTER.CVLCPT_ADT_YR = REL.CVLCPT_ADT_YR(+) AND MASTER.ADT_NO = REL.ADT_NO(+) AND MASTER.DSPS_RQT_SQNO = REL.DSPS_RQT_SQNO(+) AND MASTER.CVLCPT_ADT_YR = COPT.CVLCPT_ADT_YR(+) AND MASTER.ADT_NO = COPT.ADT_NO(+) AND MASTER.DSPS_RQT_SQNO = COPT.DSPS_RQT_SQNO(+) AND MASTER.CVLCPT_ADT_YR = DVSN.ADT_YR(+) AND MASTER.ADT_NO = DVSN.ADT_NO(+) AND MASTER.DSPS_RQT_SQNO = DVSN.DSPS_RQT_SQNO(+) AND MASTER.CVLCPT_ADT_YR = #CVLCPT_ADT_YR# AND AUD.ADT_GRNT_NO = #ADT_GRNT_NO# /*화면 감사자를 입력했을때 */ AND EXISTS (SELECT 1
FROM TB_BADEAR004M ETR WHERE 1=1 AND ETR.ADT_YR = MASTER.CVLCPT_ADT_YR AND ETR.ADT_NO = MASTER.ADT_NO AND ETR.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND EXTT_ID =#EXTT_ID# ) /*관련자를 입력했을때*/ AND EXISTS (SELECT 1
FROM TB_BADEAR007M DFNT WHERE 1=1 AND DFNT.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND DFNT.ADT_NO = MASTER.ADT_NO AND DFNT.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND DFNT.SRECS_REL_INST_CD = REL.SRECS_REL_INST_CD AND RLPR_NM LIKE #strDfntNam#||'%' ) /*화면의 감사사항을 입력 했을때*/ AND AUD.ADT_MTTR_NM LIKE '%'||#strSbjNm# ||'%' /*화면의 감사종류을 입력 했을때*/ AND SUBSTR(AUD.ADT_KDCD,3,1) = SUBSTR(#strAudKndCd#,3,1) /*화면의 감사부서 FROM - TO 입력 했을때*/ AND AUD.SPRVSN_DEPT_CD >=#SPRVSN_DEPT_CD# /*화면의 감사부서 FROM 만 입력 했을때*/ AND AUD.SPRVSN_DEPT_CD =#SPRVSN_DEPT_CD# /*화면의 감사부서 TO 입력 했을때*/ AND AUD.SPRVSN_DEPT_CD /*화면의 현관리부서 FROM - TO 입력 했을때*/ AND AUD.MNG_DEPT_CD >=#MNG_DEPT_CD# /*화면의 현관리부서 FROM 만 입력 했을때*/ AND AUD.MNG_DEPT_CD =#MNG_DEPT_CD# /*화면의 현관리부서 TO 입력 했을때*/ AND AUD.MNG_DEPT_CD /*검색일자가 시행일자일때*/ AND DETAIL.ENFC_YMD BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231') /*검색일자가 시행일자일때*/ AND DETAIL.IMPL_WHLS_CFMTN_YMD BETWEEN NVL(#strEnfStDt#,'19000101') AND NVL(#strEnfEndDt#,'99991231') /*화면의 시행부서 FROM - TO 입력 했을때*/ AND DETAIL.ENFC_DEPT_CD >= #ENFC_DEPT_CD# /*화면의 시행부서 FROM 만 입력 했을때*/ AND DETAIL.ENFC_DEPT_CD = #ENFC_DEPT_CD# /*화면의 시행부서 TO 입력 했을때*/ AND DETAIL.ENFC_DEPT_CD /* 소속기관 불포함 */ AND COPT.CMO_INST_CD = #CMO_INST_CD# /* 소속기관 포함 */ AND COPT.CMO_INST_CD LIKE REPLACE(#CMO_INST_CD#,'000','') || '%' AND MASTER.INST_SECD > #INST_SECD# AND MASTER.INST_SECD = #INST_SECD# AND (SELECT SLCT_PBNST_SECD /* 청탁공공기관구분코드 */
FROM TBDCMACM015M WHERE INST_CD = DETAIL.CMO_INST_CD) = #strPubDvsnCd# /*화면의 관계기관 FROM 만 입력 했을때*/ AND REL.SRECS_REL_INST_CD = #SRECS_REL_INST_CD# /*화면의 관계기관 FROM - TO를 다 입력 했을때*/ AND REL.SRECS_REL_INST_CD BETWEEN #SRECS_REL_INST_CD# AND #strRltnOrgCdEnd# /*화면의 관계기관 TO만 다 입력 했을때*/ AND REL.SRECS_REL_INST_CD BETWEEN '000000000000' AND #strRltnOrgCdEnd# AND REL.SRECS_REL_INST_CD IN #strSelectOrgCds[]# /*화면의 집행기관 FROM 만 입력 했을때*/ AND REL.IMPL_MNG_INST_CD LIKE #strEnfmMngOrgCdSt#||'%' /*화면의 집행기관 FROM - TO를 다 입력 했을때*/ AND REL.IMPL_MNG_INST_CD BETWEEN #strEnfmMngOrgCdSt# AND #strEnfmMngOrgCdEnd# /*화면의 집행기관 TO만 다 입력 했을때*/ AND REL.IMPL_MNG_INST_CD BETWEEN '000000000000' AND #strEnfmMngOrgCdEnd# /*화면의 집행부서 FROM 만 입력 했을때*/ AND DETAIL.IMPL_MNG_JRSD_DEPT_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdSt#,'999999') /*LIKE 개념*/ /*화면의 집행부서 FROM - TO를 다 입력 했을때*/ AND DETAIL.IMPL_MNG_JRSD_DEPT_CD BETWEEN NVL(#strEnfmMngBrdvCdSt#,'000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999') /*화면의 집행부서 TO만 다 입력 했을때*/ AND DETAIL.IMPL_MNG_JRSD_DEPT_CD BETWEEN NVL('','000000') AND NVL(#strEnfmMngBrdvCdEnd#,'999999') AND SUBSTR(DETAIL.VIOL_TPCD,1,1) = SUBSTR(#strWrdoTypCdSt#,1,1) /* 제목,내용 검색 수정 - 2018.08.07 yyh */ /* 제목+키워드를 제목, 키워드로 분리함 - 2018.10.11 yyh */ AND ( 1 = 2 /* 제목 */ OR MASTER.DSPS_RQT_NM LIKE '%'||#strTitTxt#||'%' /* 키워드 검색 */ OR ( SELECT COUNT(1)
FROM TB_BADEAR037M WHERE CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND ADT_NO = MASTER.ADT_NO AND DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND DSPS_RQT_KYWD_CN LIKE '%'||#strTitTxt#||'%' ) > 0 /* 내용 검색 */ OR ( SELECT COUNT(1)
FROM TB_BADEAR005M WHERE CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND ADT_NO = MASTER.ADT_NO AND DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND ( SVW_CN LIKE '%'||#strTitTxt#||'%' OR DSPS_RQT_ACTN_MTTR_CN LIKE '%'||#strTitTxt#||'%' ) ) > 0 ) AND NVL(DETAIL.CFMTN_STTS_SECD,'0') = '0' AND NVL(DETAIL.CFMTN_STTS_SECD,'0') IN ('1','2') AND ( 1=2 OR MASTER.DSPS_RQT_KDCD LIKE '1%' /*판정체크시*/ OR MASTER.DSPS_RQT_KDCD LIKE '2%' /*징계체크시*/ OR (MASTER.DSPS_RQT_KDCD LIKE '3%' AND MASTER.DSPS_RQT_KDCD NOT IN ('390', '391', '395', '396')) /*시정체크시*/ OR MASTER.DSPS_RQT_KDCD IN ('390', '391') /*현지시정체크시*/ OR MASTER.DSPS_RQT_KDCD IN ('395', '396') /*시정(국장전결) 체크시*/ OR (MASTER.DSPS_RQT_KDCD LIKE '4%' AND MASTER.DSPS_RQT_KDCD NOT IN ('490','495')) /*주의 체크시*/ OR MASTER.DSPS_RQT_KDCD = '490' /*현지주의 체크시*/ OR MASTER.DSPS_RQT_KDCD = '495' /*주의(국장전결) 체크시*/ OR MASTER.DSPS_RQT_KDCD LIKE '5%' /*개선 체크시*/ OR MASTER.DSPS_RQT_KDCD = '611' /*권고 체크시*/ /* OR (MASTER.DSP_RQ_KND_CD LIKE '6%' AND MASTER.DSP_RQ_KND_CD NOT IN ('611','620','621','623')) 통보 체크시*/ OR MASTER.DSPS_RQT_KDCD IN ('610','620','621','630') /* 통보(시정완료):625 추가 - 2017.03.23 yyh */ OR MASTER.DSPS_RQT_KDCD = '625' OR MASTER.DSPS_RQT_KDCD = '623' /*통보(비위)*/ OR MASTER.DSPS_RQT_KDCD IN ('620','621') /*인사자료통보 체크시*/ OR MASTER.DSPS_RQT_KDCD LIKE '7%' /*고발등 체크시*/ OR MASTER.DSPS_RQT_KDCD LIKE '8%' /*모범 체크시*/ ) /** * 금액구분 * 'PNL_DRIN_PSVT_AM'=추징회수보전금액, 'RSR_AM'=환급금액, 'SPLP_AM'=추급금액 * 'BGT_RDC_AM'=예산점감금액, 'INC_ICR_AM'=수입증대금액, 'PPL_BDN_RDT_AM'=국민부담경감금액 * 'IJS_AM'=부당금액 'SLF_HNDL_RQ_AM'=자체처리요구금액 */ /*화면의 추징회수보전금액을 선택시*/ AND DETAIL.PNRT_PRSRV_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 환급금액을 선택시*/ AND DETAIL.RMBR_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 추급금액을 선택시*/ AND DETAIL.SPLP_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 예산절감금액을 선택시*/ AND DETAIL.BGT_RTRC_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 수입증대금액을 선택시*/ AND DETAIL.INCM_INCRS_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 국민부담경감금액을 선택시*/ AND DETAIL.PPL_BRDN_RDT_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 부당금액을 선택시*/ AND DETAIL.IJS_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /*화면의 자체처리요구금액을 선택시*/ AND DETAIL.SELF_PRCS_RQT_AMT BETWEEN NVL(#strAmSt#,0) AND NVL(#strAmEnd#,999999999999) /* 확정상태(''=전체,'1'=미결,'2'=완결,'3'=완결확정) 에서 '':전체, 1:집행중, 2:집행완료로 변경 - 2015.07.02 yyh */ /*'1'=집행중 */ AND ( NVL(DETAIL.CFMTN_STTS_SECD, '0') != '2' OR ( NVL(DETAIL.CFMTN_STTS_SECD, '0') = '2' AND DETAIL.IMPL_WHLS_CFMTN_YMD > #strStdDt# ) ) /*'2'=집행완료 선택시*/ AND NVL(DETAIL.CFMTN_STTS_SECD,'0') = '2' AND DETAIL.IMPL_WHLS_CFMTN_YMD /*조치코드만 입력했을때 - 2015.06.12 yyh*/ AND EXISTS (SELECT 1
FROM TB_BADEAR007M HND WHERE 1=1 AND HND.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND HND.ADT_NO = MASTER.ADT_NO AND HND.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND HND.SRECS_REL_INST_CD = REL.SRECS_REL_INST_CD AND HND.RLPR_ACTN_SECD = #RLPR_ACTN_SECD# ) /*집행형태만 입력했을때 - 2015.06.12 yyh*/ AND EXISTS (SELECT 1
FROM TB_BADFRE008M ENFM WHERE 1=1 AND ENFM.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND ENFM.ADT_NO = MASTER.ADT_NO AND ENFM.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND ENFM.SRECS_REL_INST_CD = REL.SRECS_REL_INST_CD AND ENFM.IMPL_TPCD = #IMPL_TPCD# ) /*조치코드 + 집행형태 입력했을때 - 2015.06.12 yyh*/ AND EXISTS (SELECT 1
FROM TB_BADEAR007M A ,TB_BADFRE008M B WHERE 1=1 AND A.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND A.ADT_NO = MASTER.ADT_NO AND A.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND A.SRECS_REL_INST_CD = REL.SRECS_REL_INST_CD AND A.CVLCPT_ADT_YR = B.CVLCPT_ADT_YR AND A.ADT_NO = B.ADT_NO AND A.DSPS_RQT_SQNO = B.DSPS_RQT_SQNO AND A.SRECS_REL_INST_CD = B.SRECS_REL_INST_CD AND A.RLPR_SQNO = B.RLPR_SQNO AND A.RLPR_ACTN_SECD = #RLPR_ACTN_SECD# AND B.IMPL_TPCD = #IMPL_TPCD# ) /* 감사연번종류코드 추가 - 2015.12.22 yyh */ /*감사연번종류코드 조회를 from ~ to에서 하나로 변경 */ AND SUBSTR(AUD.ADT_KDCD,3,1) = SUBSTR(#strAudYrNoKndCdSt#,3,1) /* 실시구분조건 추가 - 2016.05.03 yyh 재심의, 특수관리, 감사결정례 조건 추가 - 2016.07.12 yyh */ /* 재심의 */ AND EXISTS ( SELECT 1
FROM TB_BADFRE012M A /*심사심의접수기본*/ WHERE A.SRECS_RCPT_SECD = '2' AND A.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND A.ADT_NO = MASTER.ADT_NO AND A.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO ) /* 특수관리 */ AND EXISTS (SELECT 1
FROM TB_BADFRE011M A /*특수관리기본*/ WHERE A.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND A.ADT_NO = MASTER.ADT_NO AND A.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO AND A.SRECS_REL_INST_CD(+) = REL.SRECS_REL_INST_CD ) /* 감사결정례 */ AND EXISTS (SELECT 1
FROM TBBADEAR034M A /*감사결정례*/ WHERE A.CVLCPT_ADT_YR = MASTER.CVLCPT_ADT_YR AND A.ADT_NO = MASTER.ADT_NO AND A.DSPS_RQT_SQNO = MASTER.DSPS_RQT_SQNO ) /* 판정유보사항여부 - 2018.08.07 yyh */ AND DETAIL.JGMT_DFR_MTTR_SECD IN ('1','2') AND DVSN.DSPS_RQT_DSCTN_SECD = #USER_HSTRY_SECD# AND DVSN.DSPS_RQT_NM_1 IS NOT NULL /* 통계자료 입력 적극행정면책 검토 코드 - 2020.02.21 les */ AND DETAIL.EXRS_RVW_SECD = #EXRS_RVW_SECD# /* 통계자료 입력 면책여부 코드 - 2020.02.21 les */ AND DETAIL.EXRS_YN_SECD = #EXRS_YN_SECD# /* 소극행정검토내용 - 2020.02.21 les */ AND DETAIL.PASV_PBADMS_RVW_CN_YN = #PASV_PBADMS_RVW_CN_YN# /* 자율여부 - 2020.02.21 les */ AND DETAIL.SELF_YN = #SELF_YN# /*감사연번호 내림차순 선택시*/ ORDER BY MASTER.CVLCPT_ADT_YR DESC, MASTER.ADT_NO DESC, MASTER.DSPS_RQT_SQNO DESC /*감사연번호 오름차순 선택시*/ ORDER BY MASTER.CVLCPT_ADT_YR ASC, MASTER.ADT_NO ASC, MASTER.DSPS_RQT_SQNO ASC /*시행일자 내림차순 선택시*/ ORDER BY DETAIL.ENFC_YMD DESC, MASTER.CVLCPT_ADT_YR ASC, MASTER.ADT_NO ASC, MASTER.DSPS_RQT_SQNO ASC /*시행일자 오름차순 선택시*/ ORDER BY DETAIL.ENFC_YMD ASC, MASTER.CVLCPT_ADT_YR ASC, MASTER.ADT_NO ASC, MASTER.DSPS_RQT_SQNO ASC