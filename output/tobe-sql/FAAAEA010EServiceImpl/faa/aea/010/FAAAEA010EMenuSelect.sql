WITH DATA AS ( SELECT ROW_NUMBER() OVER(PARTITION BY SUBSTR(CD,1,2) ORDER BY CD ASC) AS ROW_NUMBER,
    SUBSTR(CD,1,1) AS SUBSTR,
    CD AS CD
FROM TBDCMACM013C WHERE CMM_CD_DVSN_CD = '1000864' AND CD NOT IN ('000000000','1000','2000','3000','9000') AND USE_YN = 'Y' ) SELECT CD_1,
    (SELECT $strTxtColNm$
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_1) AS CD_NM_1 ,(SELECT USR_DFN_TXT_2
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_1) AS LINK_1 ,(SELECT USR_DFN_TXT_3
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_1) AS LINK_REG_1 ,(SELECT COUNT(1)
FROM TBFAAAEA045M A WHERE A.MTRL_DVSN_CD = CD_1 AND A.SRECS_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDptAuth#, '', #strDptCd#))) AND A.SRECS_DEPT_CD = #SRECS_DEPT_CD# ) AS CD_CNT_1 ,CD_2 ,(SELECT $strTxtColNm$
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_2) AS CD_NM_2 ,(SELECT USR_DFN_TXT_2
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_2) AS LINK_2 ,(SELECT USR_DFN_TXT_3
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_2) AS LINK_REG_2 ,(SELECT COUNT(1)
FROM TBFAAAEA045M A WHERE A.MTRL_DVSN_CD = CD_2 AND A.SRECS_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDptAuth#, '', #strDptCd#))) AND A.SRECS_DEPT_CD = #SRECS_DEPT_CD# ) AS CD_CNT_2 ,CD_3 ,(SELECT $strTxtColNm$
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_3) AS CD_NM_3 ,(SELECT USR_DFN_TXT_2
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_3) AS LINK_3 ,(SELECT USR_DFN_TXT_3
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_3) AS LINK_REG_3 ,(SELECT COUNT(1)
FROM TBFAAAEA045M A WHERE A.MTRL_DVSN_CD = CD_3 AND A.SRECS_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDptAuth#, '', #strDptCd#))) AND A.SRECS_DEPT_CD = #SRECS_DEPT_CD# ) AS CD_CNT_3 ,CD_9 ,(SELECT $strTxtColNm$
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_9) AS CD_NM_9 ,(SELECT USR_DFN_TXT_2
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_9) AS LINK_9 ,(SELECT USR_DFN_TXT_3
FROM TBDCMACM013C A WHERE CMM_CD_DVSN_CD = '1000864' AND A.CD = CD_9) AS LINK_REG_9 ,(SELECT COUNT(1)
FROM TBFAAAEA045M A WHERE A.MTRL_DVSN_CD = CD_9 AND A.SRECS_DEPT_CD IN (SELECT SRECS_DEPT_CD /* 심사재심의부서코드 */
FROM TABLE(F_AUTH_DEPT(#strCnb#, #strDptAuth#, '', #strDptCd#))) AND A.SRECS_DEPT_CD = #SRECS_DEPT_CD# ) AS CD_CNT_9 FROM DATA PIVOT ( MAX(CD) FOR CUT_CD IN ( '1' AS CD_1 ,'2' AS CD_2 ,'3' AS CD_3 ,'9' AS CD_9 ) ) ORDER BY DVSN