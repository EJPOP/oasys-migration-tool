SELECT T3.INFO_YR /* 정보년도 */,
    T3.LAG_CAT_SNO /* 대분류순번 */,
    T3.MID_CAT_SNO /* 중분류순번 */,
    T3.SALL_CAT_SNO /* 소분류순번 */,
    T3.SALL_CAT_TIT_NM /* 소분류제목명 */,
    '['||T3.LAG_CAT_SNO||'-'||T3.MID_CAT_SNO||'-'||T3.SALL_CAT_SNO||']' AS LAG_CAT_SNO,
    T3.SALL_CAT_TXT /* 소분류내용 */,
    T3.CHR_DPT_CD /* 담당부서코드 */,
    T3.PIC_ID /* 담당자아이디 */,
    T3.REG_YMD /* 등록일자 */,
    T3.RGTR_ID /* 등록자아이디 */,
    T3.MDFCN_YMD /* 수정일자 */,
    T3.MDFCN_PIC_ID /* 수정담당자아이디 */,
    T3.DEL_YN /* 삭제여부 */,
    T3.INFO_YR ||'-'||T3.LAG_CAT_SNO||'-'||T3.MID_CAT_SNO||'-'||T3.SALL_CAT_SNO AS GRNDS_EXMN_AEX_SQNO /* 현장조사수용비순번 */,
    F_USR_INFO(T3.PIC_ID,'2') AS PIC_NM /* 담당자명 */,
    F_DPT_INFO(T3.CHR_DPT_CD,'1') AS TKCG_DEPT_NM /* 담당부서명 */,
    T3.CMPTN_YN /* 완료여부 */,
    CASE WHEN T4.CNT>0 THEN '○' ELSE 'X' END AS CNT,
    T3.CPR_CHGR_ID,
    F_USR_INFO(T3.CPR_CHGR_ID,'2') AS F_USR_INFO,
    T3.CPR_DPT_CD,
    F_DPT_INFO(T3.CPR_DPT_CD,'1') AS F_DPT_INFO,
    T3.STD_CHGR_ID,
    F_USR_INFO(T3.STD_CHGR_ID,'2') AS F_USR_INFO,
    T3.STD_DPT_CD,
    F_DPT_INFO(T3.STD_DPT_CD,'1') AS F_DPT_INFO,
    NVL(T3.EPS_MNG_YN,'N') AS EPS_MNG_YN
FROM TBBADCMR003M T3, (SELECT SUM(CASE WHEN (SELECT AS PAGE_TITLE
FROM UBKERAPP.XR_PAGE WHERE CVLCPT_DOC_ID = TBBADCMR004D.CVLCPT_DOC_ID AND PAGE_TITLE IS NOT NULL AND ROWNUM=1) IS NOT NULL THEN 1 ELSE 0 END) AS CNT , INFO_YR , SALL_CAT_SNO FROM TBBADCMR004D WHERE INFO_YR=#INFO_YR# AND MAIN_PLCY_DTL_DVSN_CD ='b' GROUP BY INFO_YR , SALL_CAT_SNO ) T4 WHERE 1=1 AND T3.INFO_YR = T4.INFO_YR(+) AND T3.SALL_CAT_SNO = T4.SALL_CAT_SNO(+) AND T3.INFO_YR = #INFO_YR# AND T3.LAG_CAT_SNO = #strLagCatSno# AND T3.MID_CAT_SNO = #strMidCatSno# T3.SALL_CAT_SNO = #strSallCatSno#