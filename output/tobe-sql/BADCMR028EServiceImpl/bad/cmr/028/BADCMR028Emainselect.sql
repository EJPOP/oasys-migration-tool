SELECT STT_YR || '-' || STT_MNTR_SQNO AS STT_YR /* 법령년도 */,
    CASE WHEN #strDtKind# = '01' THEN DECODE(DATA_OCRN_YMD, NULL, NULL, SUBSTR(DATA_OCRN_YMD, 1, 4) || '.' || SUBSTR(DATA_OCRN_YMD, 5, 2) || '.' || SUBSTR(DATA_OCRN_YMD, 7, 2)) /*발생일자-자료발생일*/ WHEN #strDtKind# = '031' THEN DECODE(GMD_RCPT_YMD, NULL, NULL, SUBSTR(GMD_RCPT_YMD, 1, 4) || '.' || SUBSTR(GMD_RCPT_YMD, 5, 2) || '.' || SUBSTR(GMD_RCPT_YMD, 7, 2)) /*접수일-총괄과접수일*/ WHEN #strDtKind# = '04' THEN DECODE(OPNN_SBMSN_YMD, NULL, NULL, SUBSTR(OPNN_SBMSN_YMD, 1, 4) || '.' || SUBSTR(OPNN_SBMSN_YMD, 5, 2) || '.' || SUBSTR(OPNN_SBMSN_YMD, 7, 2)) /*의견제출일자-의견제출일*/ WHEN #strDtKind# = '10' THEN DECODE(CBT_MTG_RCPT_YMD, NULL, NULL, SUBSTR(CBT_MTG_RCPT_YMD, 1, 4) || '.' || SUBSTR(CBT_MTG_RCPT_YMD, 5, 2) || '.' || SUBSTR(CBT_MTG_RCPT_YMD, 7, 2)) /*사후개시일자-국무회의상정일*/ WHEN #strDtKind# = '11' THEN DECODE(EPFC_PRCS_OPNN_RPLY_YMD, NULL, NULL, SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 1, 4) || '.' || SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 5, 2) || '.' || SUBSTR(EPFC_PRCS_OPNN_RPLY_YMD, 7, 2)) /*사후처리의견회신일-사후처리 처리의견 회신일*/ WHEN #strDtKind# = '12' THEN DECODE(CPLT_YMD, NULL, NULL, SUBSTR(CPLT_YMD, 1, 4) || '.' || SUBSTR(CPLT_YMD, 5, 2) || '.' || SUBSTR(CPLT_YMD, 7, 2)) /*완결일자-완결일*/ ELSE '' END AS #STRDTKIND# /* 발생일자 */,
    F_CODE_NM('1000253', DATA_CLSF_SECD) AS F_CODE_NM /* 자료구분 */,
    F_DPT_INFO(NVL(TKCG_DEPT_CD, GMD_DEPT_CD),'1') AS CNSTN_MBCMT_DEPT_NM /* 자문위원부서명 */,
    NVL2(TKCG_DEPT_CD, 1, 2) AS NVL2 /* 담당과부서코드가 있으면 검정색 없으면 빨간색 */,
    (SELECT AS PROF_RBPRSN_INST_NM /* 증명책임자기관명 */
FROM TBDCMACM015M WHERE INST_CD = TBBADCMR011M.JRSD_MAO_SECD) AS COPT_GD_NM /*소관기관*/ , CASE WHEN STT_KDCD IS NOT NULL THEN '('|| F_CODE_NM('1000254',STT_KDCD) || ')' || MNTR_NM ELSE MNTR_NM END AS MNTR_NM /*모니터링 사항*/ , F_CODE_NM('1000256', ADT_MNTR_PRCS_STTS_SECD) AS AUD_MNT_HNDL_STA_NM /*처리상태*/ , ADT_MNTR_PRCS_STTS_SECD AS ADT_MNTR_PRCS_STTS_SECD /*처리상태코드*/ , NVL2(TRIM(REL_EMPHS_MNG_STT_YR), 'O', 'X') AS REL_EMPHS_MNG_STT_YR /*중점*/ , DECODE(NVL(PRCS_OPNN_YN, 'N'), 'Y', 'O', 'X') AS PRCS_OPNN_YN /*의견*/ , NVL2(TRIM(PRCS_OPNN_RPLY_YMD), 'O', '') AS HNDL_OPIN_RPL_YN /*회신*/ , STT_YR , STT_MNTR_SQNO , DATA_CLSF_SECD , TKCG_DEPT_CD /*담당과부서코드*/ FROM TB_BADCMR011M WHERE 1 = 1 AND ( GMD_DEPT_CD LIKE SUBSTR(#strLogInUserDptCd#, 0,2) || '%' OR TKCG_DEPT_CD LIKE SUBSTR(#strLogInUserDptCd#, 0,2) || '%' ) ADT_MNTR_PRCS_STTS_SECD IN #strAudMntHndStaCd[]# NVL(ADT_MNTR_PRCS_STTS_SECD, 'N') = 'N' AND PRCS_OPNN_YN = #PRCS_OPNN_YN# /*의견구분*/ AND NVL2(TRIM(PRCS_OPNN_RPLY_YMD), 'Y', 'N') = #strHndlOpinRplDt# /*회신여부*/ AND NVL2(TRIM(REL_EMPHS_MNG_STT_YR), 'Y', 'N') = #strReEpsMngLawYn# /*중점관리법령 대상여부*/ AND EPFC_PRCS_RFLT_YN_SECD = #EPFC_PRCS_RFLT_YN_SECD# /*사후처리구분 - 조회조건(의견반영여부) */ AND DATA_OCRN_YMD >= #strFromDt# /*자료발생일*/ AND DATA_OCRN_YMD AND GMD_RCPT_YMD >= #strFromDt# /*총괄과 접수일*/ AND GMD_RCPT_YMD AND OPNN_SBMSN_YMD >= #strFromDt# /*의견접수일*/ AND OPNN_SBMSN_YMD AND CBT_MTG_RCPT_YMD >= #strFromDt# /*국무회의상정일*/ AND CBT_MTG_RCPT_YMD AND EPFC_PRCS_OPNN_RPLY_YMD >= #strFromDt# AND EPFC_PRCS_OPNN_RPLY_YMD AND CPLT_YMD >= #strFromDt# AND CPLT_YMD AND TKCG_DEPT_CD LIKE CASE WHEN SUBSTR(#strDptCd#, 4, 3) = '000' THEN SUBSTR(#strDptCd#, 1, 3) ELSE #strDptCd# END || '%' /*소관과*/ AND JRSD_MAO_SECD = #JRSD_MAO_SECD# /*소관기관*/ AND ( UPPER(TRIM(STT_KDCD)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(MNTR_NM)) like '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(MNTR_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CBT_MTG_CN)) like '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(GMD_PRCS_OPNN_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CPD_PRCS_OPNN_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(GMD_EPFC_PRCS_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' OR UPPER(TRIM(CPD_EPFC_PRCS_CN)) LIKE '%' || UPPER(TRIM(#strLawNm#)) ||'%' ) /*법령명(검색어)*/ AND NVL(AUTO_CPLT_YN, 'N') = #strAtCpltYn# /*자동완결여부*/