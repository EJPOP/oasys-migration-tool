MERGE INTO TB_CSPDCP818M A USING ( SELECT #CVLCPT_DCLR_SECD# AS CVLCPT_DCLR_SECD /* 민원신고구분코드 */,
    #CVLCPT_RCPT_YR# AS CVLCPT_RCPT_YR /* 민원접수년도 */,
    #CVLCPT_DCLR_RCPT_NO# AS CVLCPT_DCLR_RCPT_NO /* 민원신고접수번호 */,
    #OPM_SRNO# AS CVLCPT_OPM_SQNO /* 민원시행문순번 */
FROM DUAL ) B ON ( A.CVLCPT_DCLR_SECD = B.CVLCPT_DCLR_SECD AND A.CVLCPT_RCPT_YR = B.CVLCPT_RCPT_YR AND A.CVLCPT_DCLR_RCPT_NO = B.CVLCPT_DCLR_RCPT_NO AND A.CVLCPT_OPM_SQNO = B.CVLCPT_OPM_SQNO ) WHEN MATCHED THEN UPDATE SET ONR_DOC_MNG_CARD_ID = #ONR_DOC_MNG_CARD_ID# /* 온나라문서관리카드아이디 */, CRU_PBADMS_INFO_PRCS_NO = #CRU_PBADMS_INFO_PRCS_NO# /* 부패행정정보처리번호 */, LAST_USER_ID = #LAST_USER_ID# /* 최종사용자아이디 */, LAST_PRCS_DEPT_CD = #LAST_PRCS_DEPT_CD# /* 최종처리부서코드 */, LAST_MENU_ID = #LAST_MENU_ID# /* 최종메뉴아이디 */, LAST_MDFCN_DT = SYSDATE WHEN NOT MATCHED THEN INSERT INSERT ( CVLCPT_DCLR_SECD ,CVLCPT_RCPT_YR ,CVLCPT_DCLR_RCPT_NO ,CVLCPT_OPM_SQNO ,SLCT_AVTSMT_SECD ,SLCT_OPM_ATRZ_PRCS_STTS_SECD ,CRU_PBADMS_INFO_PRCS_NO ,ONR_DOC_MNG_CARD_ID ,FRST_USER_ID ,LAST_USER_ID ,LAST_PRCS_DEPT_CD ,LAST_MENU_ID ,FRST_REG_DT ,LAST_MDFCN_DT ) VALUES ( #CVLCPT_DCLR_SECD# ,#CVLCPT_RCPT_YR# ,#CVLCPT_DCLR_RCPT_NO# ,(SELECT NVL(MAX(TO_NUMBER(CVLCPT_OPM_SQNO)),0)+1 AS CVLCPT_OPM_SQNO /* 민원시행문순번 */
FROM TB_CSPDCP818M WHERE CVLCPT_DCLR_SECD = #CVLCPT_DCLR_SECD# AND CVLCPT_RCPT_YR = #CVLCPT_RCPT_YR# AND CVLCPT_DCLR_RCPT_NO = #CVLCPT_DCLR_RCPT_NO#) ,#IFM_DVSN_CD# ,'10' ,#CRU_PBADMS_INFO_PRCS_NO# ,#ONR_DOC_MNG_CARD_ID# ,#FRT_USR_ID# ,#LAST_USER_ID# ,#LAST_PRCS_DEPT_CD# ,#LAST_MENU_ID# ,SYSDATE ,SYSDATE )