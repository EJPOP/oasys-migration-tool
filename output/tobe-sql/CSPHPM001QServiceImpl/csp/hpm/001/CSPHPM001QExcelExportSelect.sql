SELECT ROW_NUMBER() OVER( ORDER BY A.FRST_REGIST_PNTTM DESC) AS ROW_NUMBER,
    A.NTT_ID,
    A.NTT_SJ,
    A.FRST_REGISTER_ID,
    NVL(B.USER_NM, A.NTCR_NM) AS USER_NM /* 사용자명 */,
    TO_CHAR(A.FRST_REGIST_PNTTM, 'YYYY-MM-DD') AS TO_CHAR,
    A.CVLPR_EML_ADDR /* 민원인이메일주소 */,
    A.CVLPR_TELNO /* 민원인전화번호 */,
    A.JUSO,
    CASE WHEN A.SUB1 IS NOT NULL AND A.NTT_CN IS NOT NULL AND A.SUB2 IS NOT NULL THEN A.SUB1 || CHR(13)||CHR(10) || A.NTT_CN || CHR(13)||CHR(10) || A.SUB2 WHEN A.SUB1 IS NOT NULL AND A.NTT_CN IS NOT NULL AND A.SUB2 IS NULL THEN A.SUB1 || CHR(13)||CHR(10) || A.NTT_CN WHEN A.SUB1 IS NOT NULL AND A.NTT_CN IS NULL AND A.SUB2 IS NOT NULL THEN A.SUB1 || CHR(13)||CHR(10) || A.SUB2 WHEN A.SUB1 IS NULL AND A.NTT_CN IS NOT NULL AND A.SUB2 IS NOT NULL THEN A.NTT_CN || CHR(13)||CHR(10) || A.SUB2 WHEN A.SUB1 IS NOT NULL AND A.NTT_CN IS NULL AND A.SUB2 IS NULL THEN A.SUB1 WHEN A.SUB1 IS NULL AND A.NTT_CN IS NOT NULL AND A.SUB2 IS NULL THEN A.NTT_CN WHEN A.SUB1 IS NULL AND A.NTT_CN IS NULL AND A.SUB2 IS NOT NULL THEN A.SUB2 ELSE '' END AS SUB1,
    A.RDCNT,
    A.CATEGORY,
    A.PARNTSCTT_NO,
    A.ANSWER_AT,
    A.ANSWER_LC,
    A.USE_AT,
    A.CVLCPT_DOC_ID /* 민원문서아이디 */,
    A.BBS_ID /* 게시판아이디 */,
    RTRIM(A.NTCE_BGNDE) AS RTRIM,
    RTRIM(A.NTCE_ENDDE) AS RTRIM,
    A.NTCR_NM,
    '' AS HNDL_DVSN_NM,
    A.REL_INST_CD /* 관계기관코드 */,
    F_ORG_INFO(A.REL_INST_CD,'1') AS F_ORG_INFO,
    CASE WHEN A.ORG_REGI_YN='Y' THEN '등록' ELSE '미등록' END AS ORG_REGI_YN,
    A.INSTITUTION,
    A.ATRZ_STTS_SECD /* 결재상태구분코드 */,
    CASE WHEN A.ATRZ_STTS_SECD='' OR A.ATRZ_STTS_SECD IS NULL THEN '상신전' WHEN A.ATRZ_STTS_SECD='1' THEN '상신전' WHEN A.ATRZ_STTS_SECD='2' THEN '결재중' WHEN A.ATRZ_STTS_SECD='3' THEN '결재완료' END AS ATRZ_STTS_SECD /* 결재상태구분코드 */,
    A.ATRZ_DOC_NO /* 결재문서번호 */,
    CASE WHEN A.PRCS_SECD = '01' THEN '활용' WHEN A.PRCS_SECD = '02' THEN '이송' WHEN A.PRCS_SECD = '03' THEN '종결' END AS PRCS_SECD /* 처리구분코드 */,
    A.QNA_STATE,
    CASE WHEN A.QNA_STATE = 'receive' THEN '답변완료' ELSE '답변대기' END AS QNA_STATE,
    '' AS QNA_ANSWER
FROM TBCSPTSM002L a LEFT OUTER JOIN TBDCMACM001M b ON A.FRST_REGISTER_ID = B.USER_ID WHERE BBS_ID='BBSMSTR_100000000032' AND A.USE_AT = 'Y' AND (A.NTT_SJ LIKE '%' || #strSearchBox# || '%' OR A.NTT_CN LIKE '%' || #strSearchBox# || '%' OR A.NTCR_NM LIKE '%' || #strSearchBox# || '%') AND A.REL_INST_CD = #REL_INST_CD# AND (A.ORG_REGI_YN = 'N' OR A.ORG_REGI_YN = 'Y' OR A.ORG_REGI_YN IS NULL) AND A.ORG_REGI_YN = #strORG_REGI_YN# AND T2.ENFM_DPT_CD = #strDPT_CD# AND SUBSTR(A.FRST_REGIST_PNTTM,1,4) = #strYr# AND (TO_CHAR(A.FRST_REGIST_PNTTM,'YYYYMMDD') >= #strFRST_REGIST_PNTTMS# OR A.FRST_REGIST_PNTTM IS NULL) AND (TO_CHAR(A.FRST_REGIST_PNTTM,'YYYYMMDD') AND (A.ATRZ_STTS_SECD = #ATRZ_STTS_SECD# OR A.ATRZ_STTS_SECD IS NULL OR A.ATRZ_STTS_SECD = '') AND A.ATRZ_STTS_SECD = #ATRZ_STTS_SECD#